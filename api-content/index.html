{"posts":[{"title":"清平乐·寒食","content":"清风细雨乱洒衰云暮此意平生堪几度恁得来留不住休说雨恨云愁今日欲揽吴钩陌上群芳正好晚来笑我枝头","link":"https://mhxxx.github.io/post/qing-ping-le-han-shi/"},{"title":"卜算子·春节后发北京有怀","content":"驾出北城门此去归来左谁见枝头料峭寒明月江流我又是一年春愁向眉间锁要且风流到五更梦觉长安可","link":"https://mhxxx.github.io/post/bu-suan-zi-chun-jie-hou-fa-bei-jing-you-huai/"},{"title":"神雕大侠之旅","content":"12月9号.感觉嗓子有点干干的,以为是室内灰太大.12月10号.早上醒来惊觉发烧了,认定自己阳了.除了下午出门做核酸和吃饭碗外的时间都用来睡觉了,时不时醒来,会发现身上,辈子,床单都是湿的.12月11号.发烧情况比昨天好一点,没有食欲,仍然是在床上度过的.开始喉咙疼,有痰有鼻涕.夜晚睡不着觉.12月12号.不发烧了,但是咳嗽,有一些痰,有鼻涕,仍然头晕,脑子转不动,还是会发汗.夜晚睡不着觉,白天中午晚上补觉.12月13号.咳嗽加重,有痰,有鼻涕,头晕,会发汗,夜晚睡不着觉.12月14号.咳嗽,有痰,有鼻涕,头晕12月15号.咳嗽,有鼻涕.......12月24号.轻微咳嗽,吃带蒸汽食物有鼻涕.","link":"https://mhxxx.github.io/post/shen-diao-da-xia-zhi-lu/"},{"title":"蝶恋花·柳病花残还日暮","content":"柳病花残还日暮。柳病花残还日暮。柳病花残还日暮。几树流莺，天与多情付。几树流莺，天与多情付。几树流莺，天与多情付。织女相思停弄杼，织女相思停弄杼，织女相思停弄杼，霞衣织在云深处。霞衣织在云深处。霞衣织在云深处。谁把流年偷换取。谁把流年偷换取。谁把流年偷换取。小字红笺，欲寄愁无绪。小字红笺，欲寄愁无绪。小字红笺，欲寄愁无绪。拚却青春何所误，拚却青春何所误，拚却青春何所误，山长水阔无归路。山长水阔无归路。山长水阔无归路。","link":"https://mhxxx.github.io/post/die-lian-hua-liu-bing-hua-can-huan-ri-mu/"},{"title":"点绛唇·遥夜沉沉","content":"遥夜沉沉，遥夜沉沉，遥夜沉沉，中天蟾桂连星斗。中天蟾桂连星斗。中天蟾桂连星斗。蓦然回首，蓦然回首，蓦然回首，人影还依旧。人影还依旧。人影还依旧。剪水明眸，剪水明眸，剪水明眸，拂槛红酥手。拂槛红酥手。拂槛红酥手。君知否，君知否，君知否，一经别后，一经别后，一经别后，日日相思瘦。日日相思瘦。日日相思瘦。","link":"https://mhxxx.github.io/post/dian-jiang-chun-yao-ye-chen-chen/"},{"title":"蟾宫曲·叹上林逝水匆匆","content":"叹上林逝水匆匆。叹上林逝水匆匆。叹上林逝水匆匆。姹紫嫣红，姹紫嫣红，姹紫嫣红，回首成空。回首成空。回首成空。霜重天寒，霜重天寒，霜重天寒，朝来急雨，朝来急雨，朝来急雨，晚送终风。晚送终风。晚送终风。摽有梅人去无踪，摽有梅人去无踪，摽有梅人去无踪，桃夭夭击鼓谁同？桃夭夭击鼓谁同？桃夭夭击鼓谁同？此时应是，此时应是，此时应是，化作闲云，化作闲云，化作闲云，留住归鸿。留住归鸿。留住归鸿。","link":"https://mhxxx.github.io/post/chan-gong-qu-tan-shang-lin-shi-shui-cong-cong/"},{"title":"采桑子·云清日晚人归后","content":"云清日晚人归后，云清日晚人归后，云清日晚人归后，淡染烟霞。淡染烟霞。淡染烟霞。好景无暇，好景无暇，好景无暇，蝶舞纷纷落草花。蝶舞纷纷落草花。蝶舞纷纷落草花。园中乍放桜千树，园中乍放桜千树，园中乍放桜千树，绝代芳华。绝代芳华。绝代芳华。望断天涯，望断天涯，望断天涯，且试春风一盏茶。且试春风一盏茶。且试春风一盏茶。","link":"https://mhxxx.github.io/post/cai-sang-zi-yun-qing-ri-wan-ren-gui-hou/"},{"title":"采桑子·采桑行径知何处","content":"采桑行径知何处。采桑行径知何处。采桑行径知何处。万水千山。万水千山。万水千山。万水千山，万水千山，万水千山，辛苦遭逢为哪般。辛苦遭逢为哪般。辛苦遭逢为哪般。竹篱茅舍来时路。竹篱茅舍来时路。竹篱茅舍来时路。梦里寻欢。梦里寻欢。梦里寻欢。梦里寻欢，梦里寻欢，梦里寻欢，一树梨花雪漫天。一树梨花雪漫天。一树梨花雪漫天。","link":"https://mhxxx.github.io/post/cai-sang-zi-cai-sang-xing-jing-zhi-he-chu/"},{"title":"卜算子·暮野泛余寒","content":"暮野泛余寒，暮野泛余寒，暮野泛余寒，芳草连天绿。芳草连天绿。芳草连天绿。又是一年细雨时，又是一年细雨时，又是一年细雨时，散落琵琶曲。散落琵琶曲。散落琵琶曲。醉后不知春，醉后不知春，醉后不知春，酒醒花成束。酒醒花成束。酒醒花成束。玄鸟归飞蚱蜢风，玄鸟归飞蚱蜢风，玄鸟归飞蚱蜢风，长忆离人玉。长忆离人玉。长忆离人玉。","link":"https://mhxxx.github.io/post/bu-suan-zi-mu-ye-fan-yu-han/"},{"title":"暗香","content":"梦乡易觉，又冷风冷雨，春归寒数。梦乡易觉，又冷风冷雨，春归寒数。梦乡易觉，又冷风冷雨，春归寒数。再见玉人，镜里朱颜已非昨。再见玉人，镜里朱颜已非昨。再见玉人，镜里朱颜已非昨。争忍平生苦恨，都换作、眉间欢乐。争忍平生苦恨，都换作、眉间欢乐。争忍平生苦恨，都换作、眉间欢乐。但见得、竹外疏花，清月夜良薄。但见得、竹外疏花，清月夜良薄。但见得、竹外疏花，清月夜良薄。花落，影绰绰。花落，影绰绰。花落，影绰绰。道是独自怜，翠损红萼。道是独自怜，翠损红萼。道是独自怜，翠损红萼。不谙对错，飞向人间总飘泊。不谙对错，飞向人间总飘泊。不谙对错，飞向人间总飘泊。惆怅今宵月色，听枕上、三更凉柝。惆怅今宵月色，听枕上、三更凉柝。惆怅今宵月色，听枕上、三更凉柝。怕只是、人去后，对花寂寞。怕只是、人去后，对花寂寞。怕只是、人去后，对花寂寞。","link":"https://mhxxx.github.io/post/an-xiang/"},{"title":"忆故人","content":"不思誰思，不思誰思，不思誰思，不觉誰觉。不觉誰觉。不觉誰觉。酒后心情长戚戚。酒后心情长戚戚。酒后心情长戚戚。纵有春风盈袖，纵有春风盈袖，纵有春风盈袖，桃花零落百花瘦。桃花零落百花瘦。桃花零落百花瘦。阶前草，阶前草，阶前草，梁上燕，梁上燕，梁上燕，院中新柳，院中新柳，院中新柳，那个和我，那个和我，那个和我，一一曾携手。一一曾携手。一一曾携手。怕这春归，怕这春归，怕这春归，怕这人如旧，怕这人如旧，怕这人如旧，怕这水天山色，怕这水天山色，怕这水天山色，绊惹参商宿。绊惹参商宿。绊惹参商宿。","link":"https://mhxxx.github.io/post/yi-gu-ren/"},{"title":"长相思·春水平","content":"春水平，春日明，春水平，春日明，春水平，春日明，墙角春风尚未行，墙角春风尚未行，墙角春风尚未行，墙头春已红。墙头春已红。墙头春已红。花无情，人有情，花无情，人有情，花无情，人有情，花落抛人独自行，花落抛人独自行，花落抛人独自行，无情负有情。无情负有情。无情负有情。","link":"https://mhxxx.github.io/post/chang-xiang-si-chun-shui-ping/"},{"title":"虞美人·春行","content":"枇杷叶底黄莺叫，枇杷叶底黄莺叫，枇杷叶底黄莺叫，取次长安道。取次长安道。取次长安道。池塘青草露华浓，池塘青草露华浓，池塘青草露华浓，可惜今年春恨去年同。可惜今年春恨去年同。可惜今年春恨去年同。芳菲吐尽春无数，芳菲吐尽春无数，芳菲吐尽春无数，不得红颜住。不得红颜住。不得红颜住。此时此刻几多情？此时此刻几多情？此时此刻几多情？陌上芳心千片恼人行。陌上芳心千片恼人行。陌上芳心千片恼人行。","link":"https://mhxxx.github.io/post/yu-mei-ren-chun-xing/"},{"title":"渔家傲·三月樱花香满道","content":"三月樱花香满道。三月樱花香满道。三月樱花香满道。东风无力枝头闹。东风无力枝头闹。东风无力枝头闹。新雨一番晴更早。新雨一番晴更早。新雨一番晴更早。闻语鸟，行人却唱伤春调。闻语鸟，行人却唱伤春调。闻语鸟，行人却唱伤春调。谁叹红稀春色少？谁叹红稀春色少？谁叹红稀春色少？长安城外春光好。长安城外春光好。长安城外春光好。蝶舞莺飞春未老。蝶舞莺飞春未老。蝶舞莺飞春未老。人易老，霜颜白发何辞笑。人易老，霜颜白发何辞笑。人易老，霜颜白发何辞笑。","link":"https://mhxxx.github.io/post/yu-jia-ao-san-yue-ying-hua-xiang-man-dao/"},{"title":"渔家傲·何处新欢何处闹","content":"何处新欢何处闹，何处新欢何处闹，何处新欢何处闹，销魂莫比黄昏觉。销魂莫比黄昏觉。销魂莫比黄昏觉。拚却千樽樽不倒。拚却千樽樽不倒。拚却千樽樽不倒。香尘杳，桃花梦里桃花俏。香尘杳，桃花梦里桃花俏。香尘杳，桃花梦里桃花俏。曾对西风留晚照，曾对西风留晚照，曾对西风留晚照，雨馀芳草斜阳道，雨馀芳草斜阳道，雨馀芳草斜阳道，碧玉生花空自好。碧玉生花空自好。碧玉生花空自好。谁知晓？杨华暗把桃花笑。谁知晓？杨华暗把桃花笑。谁知晓？杨华暗把桃花笑。","link":"https://mhxxx.github.io/post/yu-jia-ao-he-chu-xin-huan-he-chu-nao/"},{"title":"忆秦娥·楚天噎","content":"楚天噎，楚天噎，楚天噎，角聲吹徹千秋月。角聲吹徹千秋月。角聲吹徹千秋月。千秋月，千秋月，千秋月，無情看遍，無情看遍，無情看遍，舊時英傑。舊時英傑。舊時英傑。一年好景尋歡節，一年好景尋歡節，一年好景尋歡節，临皋目断淒風切。临皋目断淒風切。临皋目断淒風切。淒風切，淒風切，淒風切，长安城外，长安城外，长安城外，马嘶人绝。马嘶人绝。马嘶人绝。","link":"https://mhxxx.github.io/post/yi-qin-e-chu-tian-ye/"},{"title":"忆江南","content":"慵容醒慵容醒慵容醒晚起淡梳妆晚起淡梳妆晚起淡梳妆黄雀翻飞寻伴侣黄雀翻飞寻伴侣黄雀翻飞寻伴侣佳人倚柱问斜阳佳人倚柱问斜阳佳人倚柱问斜阳结发在何方结发在何方结发在何方","link":"https://mhxxx.github.io/post/yi-jiang-nan/"},{"title":"一剪梅·黄叶翻飞翠浪摇","content":"黄叶翻飞翠浪摇。黄叶翻飞翠浪摇。黄叶翻飞翠浪摇。风也潇潇，风也潇潇，风也潇潇，雨也潇潇。雨也潇潇。雨也潇潇。断肠争度可怜宵。断肠争度可怜宵。断肠争度可怜宵。天上云销，天上云销，天上云销，地上人销。地上人销。地上人销。还唱相思减字谣。还唱相思减字谣。还唱相思减字谣。人也飘飘，人也飘飘，人也飘飘，心也飘飘。心也飘飘。心也飘飘。那年明月傍西桥。那年明月傍西桥。那年明月傍西桥。满眼花娇，满眼花娇，满眼花娇，不比人娇。不比人娇。不比人娇。","link":"https://mhxxx.github.io/post/yi-jian-mei-huang-xie-fei-ling-cui-lang-yao/"},{"title":"行香子·我自无忧","content":"我自无忧我自无忧我自无忧我自风流我自风流我自风流平生事平生事平生事覆水难收覆水难收覆水难收千金不易千金不易千金不易百岁堪求百岁堪求百岁堪求纵谣言起讥诮向冷眼留纵谣言起讥诮向冷眼留纵谣言起讥诮向冷眼留诗情但起诗情但起诗情但起只待从头只待从头只待从头阑干外阑干外阑干外千古悠悠千古悠悠千古悠悠金樽绿醑金樽绿醑金樽绿醑一任春愁一任春愁一任春愁醉梨花飞桃花舞李花羞醉梨花飞桃花舞李花羞醉梨花飞桃花舞李花羞","link":"https://mhxxx.github.io/post/xing-xiang-zi-wo-zi-wu-you/"},{"title":"西江月·往日夜黄更影","content":"往日叶黄更影，往日叶黄更影，往日叶黄更影，今兹雁去无声。今兹雁去无声。今兹雁去无声。北风吹尽酒微清，北风吹尽酒微清，北风吹尽酒微清，知是重阳寒劲。知是重阳寒劲。知是重阳寒劲。眼底佳人含泪，眼底佳人含泪，眼底佳人含泪，心中无限伤情。心中无限伤情。心中无限伤情。鸳鸯织就羽朱红，鸳鸯织就羽朱红，鸳鸯织就羽朱红，日晚谁托幽梦？日晚谁托幽梦？日晚谁托幽梦？","link":"https://mhxxx.github.io/post/xi-jiang-yue-wang-ri-ye-huang-geng-ying/"},{"title":"水龙吟·次韵章质夫（燕忙莺懒芳残）咏杨花藉怀文山","content":"残花败草新寒，残花败草新寒，残花败草新寒，算而今，算而今，算而今，几番飘坠。几番飘坠。几番飘坠。曾经春色，曾经春色，曾经春色，莺歌蝶舞，莺歌蝶舞，莺歌蝶舞，如何来思。如何来思。如何来思。月冷人间，月冷人间，月冷人间，不堪霜重，不堪霜重，不堪霜重，阁楼深闭。阁楼深闭。阁楼深闭。梦觉归何处？梦觉归何处？梦觉归何处？干戈寥落，干戈寥落，干戈寥落，又时被、鸦惊起。又时被、鸦惊起。又时被、鸦惊起。不恨随风万里，不恨随风万里，不恨随风万里，恨从来、晨星难缀。恨从来、晨星难缀。恨从来、晨星难缀。江天俱改，江天俱改，江天俱改，烟云都住，烟云都住，烟云都住，山河梦碎。山河梦碎。山河梦碎。惶恐滩头，惶恐滩头，惶恐滩头，零丁洋里，零丁洋里，零丁洋里，此身萦水。此身萦水。此身萦水。道英雄，道英雄，道英雄，有尽年华，有尽年华，有尽年华，不尽是丹心泪。不尽是丹心泪。不尽是丹心泪。","link":"https://mhxxx.github.io/post/shui-long-yin-ci-yun-zhang-zhi-fu-yan-mang-ying-lan-fang-can-yong-yang-hua-jie-huai-wen-shan/"},{"title":"如梦令·道是将开还未","content":"道是将开还未，道是将开还未，道是将开还未，粉淡绿浓红碎。粉淡绿浓红碎。粉淡绿浓红碎。怯怯见人羞，怯怯见人羞，怯怯见人羞，怕识东君滋味。怕识东君滋味。怕识东君滋味。沉醉，沉醉。沉醉，沉醉。沉醉，沉醉。风皱眼波儿媚。风皱眼波儿媚。风皱眼波儿媚。","link":"https://mhxxx.github.io/post/ru-meng-ling-dao-shi-jiang-kai-huan-wei/"},{"title":"庆佳节·春节","content":"迎春节，迎春节，迎春节，迎春节。迎春节。迎春节。千万家、华灯列。千万家、华灯列。千万家、华灯列。舞浪歌潮极欢悦。舞浪歌潮极欢悦。舞浪歌潮极欢悦。切莫负、新风月。切莫负、新风月。切莫负、新风月。烟花爆竹何时歇。烟花爆竹何时歇。烟花爆竹何时歇。看窗外、暗香发。看窗外、暗香发。看窗外、暗香发。好事年年与君说。好事年年与君说。好事年年与君说。说不尽、轻离别。说不尽、轻离别。说不尽、轻离别。","link":"https://mhxxx.github.io/post/qing-jia-jie-chun-jie/"},{"title":"清平乐·迷蒙烟雨","content":"迷蒙烟雨，迷蒙烟雨，迷蒙烟雨，都做春风语。都做春风语。都做春风语。掠起池塘伤心处，掠起池塘伤心处，掠起池塘伤心处，杨柳千千愁絮。杨柳千千愁絮。杨柳千千愁絮。长大南北西东，长大南北西东，长大南北西东，芳菲知与谁同。芳菲知与谁同。芳菲知与谁同。占取早春颜色，占取早春颜色，占取早春颜色，还应是、小桃红。还应是、小桃红。还应是、小桃红。","link":"https://mhxxx.github.io/post/qing-ping-le-mi-meng-yan-yu/"},{"title":"清平乐·春来秋去","content":"春来秋去，春来秋去，春来秋去，又是冬将暮。又是冬将暮。又是冬将暮。不减寒香来时路，不减寒香来时路，不减寒香来时路，颜色明明如故。颜色明明如故。颜色明明如故。年少莫笑庭花，年少莫笑庭花，年少莫笑庭花，萧萧风底谁家。萧萧风底谁家。萧萧风底谁家。惊起嘉宾几对，惊起嘉宾几对，惊起嘉宾几对，双双散入云霞。双双散入云霞。双双散入云霞。","link":"https://mhxxx.github.io/post/qing-ping-le-chun-lai-qiu-qu/"},{"title":"青玉案·天南地北迢迢路","content":"天南地北迢迢路，天南地北迢迢路，天南地北迢迢路，远山水，远山水，远山水，何时去。何时去。何时去。放浪横舟江不渡，放浪横舟江不渡，放浪横舟江不渡，画阑湖畔，画阑湖畔，画阑湖畔，迷云烟树，迷云烟树，迷云烟树，不见飘香处。不见飘香处。不见飘香处。芳华煮酒天将暮，芳华煮酒天将暮，芳华煮酒天将暮，但作相思断肠句。但作相思断肠句。但作相思断肠句。半掩琵琶心莫许，半掩琵琶心莫许，半掩琵琶心莫许，知音不顾，知音不顾，知音不顾，促织识曲，促织识曲，促织识曲，晓望梧桐雨。晓望梧桐雨。晓望梧桐雨。","link":"https://mhxxx.github.io/post/qing-yu-an-tian-nan-di-bei-tiao-tiao-lu/"},{"title":"青玉案·雷声半死天凉透","content":"雷声半死天凉透，雷声半死天凉透，雷声半死天凉透，薄雾隐、无边昼。薄雾隐、无边昼。薄雾隐、无边昼。锦瑟春光惊蛰后。锦瑟春光惊蛰后。锦瑟春光惊蛰后。青山影外，青山影外，青山影外，碧湖波皱，碧湖波皱，碧湖波皱，点点桃花就。点点桃花就。点点桃花就。桃花暗结相思扣，桃花暗结相思扣，桃花暗结相思扣，不管人间百花瘦。不管人间百花瘦。不管人间百花瘦。锁住春心谁与绣。锁住春心谁与绣。锁住春心谁与绣。风牵雨线，风牵雨线，风牵雨线，云迷烟兽。云迷烟兽。云迷烟兽。随意章台就。随意章台就。随意章台就。","link":"https://mhxxx.github.io/post/qing-yu-an-lei-sheng-ban-si-tian-liang-tou/"},{"title":"菩萨蛮·霜纨玉枕侵寒被","content":"霜纨玉枕侵寒被霜纨玉枕侵寒被霜纨玉枕侵寒被此时此夜如何寐此时此夜如何寐此时此夜如何寐枕上雨微红枕上雨微红枕上雨微红相逢是梦中相逢是梦中相逢是梦中醒来还复醉醒来还复醉醒来还复醉毕竟灯花泪毕竟灯花泪毕竟灯花泪白日不曾休白日不曾休白日不曾休无情似水流无情似水流无情似水流","link":"https://mhxxx.github.io/post/pu-sa-man-shuang-wan-yu-zhen-qin-han-bei/"},{"title":"菩萨蛮·冬禽已作双飞去","content":"冬禽已作双飞去，冬禽已作双飞去，冬禽已作双飞去，疾风枯草人独立。疾风枯草人独立。疾风枯草人独立。杨柳弄轻烟，杨柳弄轻烟，杨柳弄轻烟，轻烟凝柳寒。轻烟凝柳寒。轻烟凝柳寒。艳阳随意好，艳阳随意好，艳阳随意好，明月无心照。明月无心照。明月无心照。本已恨归舟，本已恨归舟，本已恨归舟，归舟去又留。归舟去又留。归舟去又留。","link":"https://mhxxx.github.io/post/pu-sa-man-dong-qin-yi-zuo-shuang-fei-qu/"},{"title":"念奴娇·笑人生短","content":"笑人生短，事千易，飞尽杨花无悔。笑人生短，事千易，飞尽杨花无悔。笑人生短，事千易，飞尽杨花无悔。苦黯情长，思不尽，琐屑残枝点缀。苦黯情长，思不尽，琐屑残枝点缀。苦黯情长，思不尽，琐屑残枝点缀。借水天潮，风云叱诧，今又当年愧。借水天潮，风云叱诧，今又当年愧。借水天潮，风云叱诧，今又当年愧。忧愁情绪，强乐还是无味。忧愁情绪，强乐还是无味。忧愁情绪，强乐还是无味。双鬓老过垂微，再摘星示尔，箜篌声碎。双鬓老过垂微，再摘星示尔，箜篌声碎。双鬓老过垂微，再摘星示尔，箜篌声碎。点点滴滴，如此地，忘了除非能醉。点点滴滴，如此地，忘了除非能醉。点点滴滴，如此地，忘了除非能醉。酒醒花前，把青釭散落，此时凝睇。酒醒花前，把青釭散落，此时凝睇。酒醒花前，把青釭散落，此时凝睇。桃花能会，晚风春雨和泪。桃花能会，晚风春雨和泪。桃花能会，晚风春雨和泪。","link":"https://mhxxx.github.io/post/nian-nu-jiao-xiao-ren-sheng-duan/"},{"title":"满江红·雾外江山","content":"雾外江山，狼烟处，岂堪庸辈。雾外江山，狼烟处，岂堪庸辈。雾外江山，狼烟处，岂堪庸辈。莫敢忘，百年国耻，冲冠相对。莫敢忘，百年国耻，冲冠相对。莫敢忘，百年国耻，冲冠相对。埋骨无销豪杰血，凭栏揾尽英雄泪。埋骨无销豪杰血，凭栏揾尽英雄泪。埋骨无销豪杰血，凭栏揾尽英雄泪。料而今，风起浪千寻，人声沸。料而今，风起浪千寻，人声沸。料而今，风起浪千寻，人声沸。波涛急，潮头戏。唯效死，如何退！波涛急，潮头戏。唯效死，如何退！波涛急，潮头戏。唯效死，如何退！唤天龙，破灭阊阖门第。唤天龙，破灭阊阖门第。唤天龙，破灭阊阖门第。漫展红旗千万里，五星光耀神州地。漫展红旗千万里，五星光耀神州地。漫展红旗千万里，五星光耀神州地。任凭栏、望断这人间，千山翠。任凭栏、望断这人间，千山翠。任凭栏、望断这人间，千山翠。","link":"https://mhxxx.github.io/post/man-jiang-hong-wu-wai-jiang-shan/"},{"title":"浪淘沙·一夜雨惊寒","content":"一夜雨惊寒，一夜雨惊寒，一夜雨惊寒，薄袖轻衫。薄袖轻衫。薄袖轻衫。半杯清酒倚栏杆。半杯清酒倚栏杆。半杯清酒倚栏杆。梦里不知花尽去，梦里不知花尽去，梦里不知花尽去，愁上眉间。愁上眉间。愁上眉间。泪落忆红颜，泪落忆红颜，泪落忆红颜，才过经年，才过经年，才过经年，参商难遇恨贪欢。参商难遇恨贪欢。参商难遇恨贪欢。回首耳边须锦瑟，回首耳边须锦瑟，回首耳边须锦瑟，往事如烟。往事如烟。往事如烟。","link":"https://mhxxx.github.io/post/lang-tao-sha-yi-ye-yu-liang-han/"},{"title":"江城子·秋风秋雨夜凉凉","content":"秋风秋雨夜凉凉，秋风秋雨夜凉凉，秋风秋雨夜凉凉，杏子黄，杏子黄，杏子黄，暗花香。暗花香。暗花香。灯下无人，灯下无人，灯下无人，何处诉衷肠。何处诉衷肠。何处诉衷肠。可叹我心如梦令，可叹我心如梦令，可叹我心如梦令，云翳剪，云翳剪，云翳剪，却彷徨。却彷徨。却彷徨。风华当世纵轻狂，风华当世纵轻狂，风华当世纵轻狂，舞银枪，舞银枪，舞银枪，弄文章。弄文章。弄文章。黄鹤楼头，黄鹤楼头，黄鹤楼头，谈笑胜君王。谈笑胜君王。谈笑胜君王。转眼春秋二十载，转眼春秋二十载，转眼春秋二十载，花自落，花自落，花自落，夜孤凉。夜孤凉。夜孤凉。","link":"https://mhxxx.github.io/post/jiang-cheng-zi-qiu-feng-qiu-yu-ye-liang-liang/"},{"title":"贺新郎·惜花","content":"拚却闲烦恼，向人间、水光山色，萦云芳草。拚却闲烦恼，向人间、水光山色，萦云芳草。拚却闲烦恼，向人间、水光山色，萦云芳草。妆点清明胭脂色，赖有枝头妖娆。妆点清明胭脂色，赖有枝头妖娆。妆点清明胭脂色，赖有枝头妖娆。忍攀摘，一枝嫩小。忍攀摘，一枝嫩小。忍攀摘，一枝嫩小。赠与红颜侵鬓角，有谁知、花比红颜俏。赠与红颜侵鬓角，有谁知、花比红颜俏。赠与红颜侵鬓角，有谁知、花比红颜俏。徒惹得，黄莺诮。徒惹得，黄莺诮。徒惹得，黄莺诮。天暝日晚归轻棹，掩朱门、飞花乱舞，夕阳残照。天暝日晚归轻棹，掩朱门、飞花乱舞，夕阳残照。天暝日晚归轻棹，掩朱门、飞花乱舞，夕阳残照。不是飞花无情思，万语千言难道。不是飞花无情思，万语千言难道。不是飞花无情思，万语千言难道。但暗许，明年更好。但暗许，明年更好。但暗许，明年更好。只恐今春留遗恨，惜此身、换取红颜笑。只恐今春留遗恨，惜此身、换取红颜笑。只恐今春留遗恨，惜此身、换取红颜笑。零落后，谁人扫。零落后，谁人扫。零落后，谁人扫。","link":"https://mhxxx.github.io/post/he-xin-lang-xi-hua/"},{"title":"反调苍梧谣·灿","content":"灿灿灿漫江碧叶风吹散漫江碧叶风吹散漫江碧叶风吹散夜静极夜静极夜静极月华如烟淡月华如烟淡月华如烟淡","link":"https://mhxxx.github.io/post/fan-diao-cang-wu-yao-can/"},{"title":"洞仙歌·冰姿秀骨","content":"冰姿秀骨，冰姿秀骨，冰姿秀骨，梦入伊人面。梦入伊人面。梦入伊人面。一度别离几时见，一度别离几时见，一度别离几时见，纵音书，纵音书，纵音书，百字十字无言。百字十字无言。百字十字无言。更漏慢，更漏慢，更漏慢，静把柔肠千转。静把柔肠千转。静把柔肠千转。闻伊生辰至，闻伊生辰至，闻伊生辰至，双十芳华，双十芳华，双十芳华，传与疏星照河汉。传与疏星照河汉。传与疏星照河汉。看寒风惊起，看寒风惊起，看寒风惊起，雪舞翩跹。雪舞翩跹。雪舞翩跹。残枝上，残枝上，残枝上，春光一点。春光一点。春光一点。向天祈，向天祈，向天祈，万事遂人愿。万事遂人愿。万事遂人愿。莫教我，莫教我，莫教我，时时为伊心乱。时时为伊心乱。时时为伊心乱。","link":"https://mhxxx.github.io/post/dong-xian-ge-bing-zi-xiu-gu/"},{"title":"长安雨","content":"魂悸惊雷动，魂悸惊雷动，魂悸惊雷动，皇城墨漫天。皇城墨漫天。皇城墨漫天。一地云烟起，一地云烟起，一地云烟起，风雨满长安。风雨满长安。风雨满长安。","link":"https://mhxxx.github.io/post/chang-an-yu/"},{"title":"除夕","content":"皓雪寒梅挂新衫，皓雪寒梅挂新衫，皓雪寒梅挂新衫，九转星河落玉盘。九转星河落玉盘。九转星河落玉盘。春风一度明灯火，春风一度明灯火，春风一度明灯火，金尊琉璃啭莺鸾。金尊琉璃啭莺鸾。金尊琉璃啭莺鸾。","link":"https://mhxxx.github.io/post/chu-xi/"},{"title":"长大雾霾吟","content":"鸡鸣天欲曙，学子动征铎。鸡鸣天欲曙，学子动征铎。鸡鸣天欲曙，学子动征铎。晓起睡方觉，氤氲绕城郭。晓起睡方觉，氤氲绕城郭。晓起睡方觉，氤氲绕城郭。上林渭水泮，不似人间何。上林渭水泮，不似人间何。上林渭水泮，不似人间何。临面危楼高百尺，依约身影开阊阖。临面危楼高百尺，依约身影开阊阖。临面危楼高百尺，依约身影开阊阖。出门寒烟扑颊来，升腾飘渺恣婆娑。出门寒烟扑颊来，升腾飘渺恣婆娑。出门寒烟扑颊来，升腾飘渺恣婆娑。不见行人影，唯闻行人笑。不见行人影，唯闻行人笑。不见行人影，唯闻行人笑。惊起嘉宾千万叫，纵横袅娜遮日曜。惊起嘉宾千万叫，纵横袅娜遮日曜。惊起嘉宾千万叫，纵横袅娜遮日曜。忽而西来忽而东，忽而骤伏忽腾空。忽而西来忽而东，忽而骤伏忽腾空。忽而西来忽而东，忽而骤伏忽腾空。为问嘉宾有喜悲，喜为谁来悲复谁？为问嘉宾有喜悲，喜为谁来悲复谁？为问嘉宾有喜悲，喜为谁来悲复谁？枯藤老树昂然立，上参天苍下穷地。枯藤老树昂然立，上参天苍下穷地。枯藤老树昂然立，上参天苍下穷地。藤树枯老尚如此，男儿志壮安敢弃。藤树枯老尚如此，男儿志壮安敢弃。藤树枯老尚如此，男儿志壮安敢弃。前路知何处，漫漫遥无际。前路知何处，漫漫遥无际。前路知何处，漫漫遥无际。人相携，楼相去。草相交，湖相裛。人相携，楼相去。草相交，湖相裛。人相携，楼相去。草相交，湖相裛。湖上洛女才出浴，白衬轻纱裹素衣。湖上洛女才出浴，白衬轻纱裹素衣。湖上洛女才出浴，白衬轻纱裹素衣。眉间新染翠螺黛，回首惊鸿掩面羞。眉间新染翠螺黛，回首惊鸿掩面羞。眉间新染翠螺黛，回首惊鸿掩面羞。男儿相望长相思，洛女闺深几许愁。男儿相望长相思，洛女闺深几许愁。男儿相望长相思，洛女闺深几许愁。愁愁愁！古今多少事，一掊黄土解烦忧。愁愁愁！古今多少事，一掊黄土解烦忧。愁愁愁！古今多少事，一掊黄土解烦忧。餐霞兮饮露，驾鹤兮游龙。餐霞兮饮露，驾鹤兮游龙。餐霞兮饮露，驾鹤兮游龙。主人安在哉？长大雾霾中。主人安在哉？长大雾霾中。主人安在哉？长大雾霾中。","link":"https://mhxxx.github.io/post/chang-da-wu-mai-yin/"},{"title":"别诗","content":"裁叶绫罗衣，裁叶绫罗衣，裁叶绫罗衣，飞烟红纱张。飞烟红纱张。飞烟红纱张。但闻君东去，但闻君东去，但闻君东去，轻歌伴霓裳。轻歌伴霓裳。轻歌伴霓裳。两声迷夜月，两声迷夜月，两声迷夜月，一舞醉秋阳。一舞醉秋阳。一舞醉秋阳。爱惜美人言，爱惜美人言，爱惜美人言，莫负好韶光。莫负好韶光。莫负好韶光。","link":"https://mhxxx.github.io/post/bie-shi/"},{"title":"楚狂","content":"曾闻华音琴百张，曾闻华音琴百张，曾闻华音琴百张，不及山野歌一乡。不及山野歌一乡。不及山野歌一乡。适时凤德接舆去，适时凤德接舆去，适时凤德接舆去，魂归只为对楚狂。魂归只为对楚狂。魂归只为对楚狂。","link":"https://mhxxx.github.io/post/chu-kuang/"},{"title":"春日即兴","content":"其一天边暝色近，天边暝色近，天边暝色近，风雨乱吹箫。风雨乱吹箫。风雨乱吹箫。花影雕朱户，花影雕朱户，花影雕朱户，波心荡玉桥。波心荡玉桥。波心荡玉桥。其二春风开柳眼，春风开柳眼，春风开柳眼，微雨动梅腮。微雨动梅腮。微雨动梅腮。紫燕双飞去，紫燕双飞去，紫燕双飞去，流莺笑语来。流莺笑语来。流莺笑语来。其三明明月，照谁家。明明月，照谁家。明明月，照谁家。如今芳草信天涯。如今芳草信天涯。如今芳草信天涯。风帘夜带南疆雨，风帘夜带南疆雨，风帘夜带南疆雨，绿水催开一树花。绿水催开一树花。绿水催开一树花。","link":"https://mhxxx.github.io/post/chun-ri-ji-xing/"},{"title":"端午抒怀","content":"姮月还缺影无芒，姮月还缺影无芒，姮月还缺影无芒，蒿草有心系四方。蒿草有心系四方。蒿草有心系四方。夜外寒山扶风倒，夜外寒山扶风倒，夜外寒山扶风倒，梦里笙歌宴碧江。梦里笙歌宴碧江。梦里笙歌宴碧江。行舟千里仍高洁，行舟千里仍高洁，行舟千里仍高洁，哪堪骚歌覆清霜。哪堪骚歌覆清霜。哪堪骚歌覆清霜。酒是楚水人为觞，酒是楚水人为觞，酒是楚水人为觞，兹此一尊敬高阳。兹此一尊敬高阳。兹此一尊敬高阳。","link":"https://mhxxx.github.io/post/duan-wu-shu-huai/"},{"title":"仿李催","content":"秋夜绵绵点情眸，秋夜绵绵点情眸，秋夜绵绵点情眸，意乱飘飘月宫游。意乱飘飘月宫游。意乱飘飘月宫游。嫦娥窃药应悔去，嫦娥窃药应悔去，嫦娥窃药应悔去，吴刚伐桂又何求。吴刚伐桂又何求。吴刚伐桂又何求。百里关山人似水，百里关山人似水，百里关山人似水，九霄云外影如勾。九霄云外影如勾。九霄云外影如勾。书墨阑珊楼台处，书墨阑珊楼台处，书墨阑珊楼台处，流光下散使人愁。流光下散使人愁。流光下散使人愁。","link":"https://mhxxx.github.io/post/fang-li-cui/"},{"title":"故地晚游","content":"明月掩层云，霜天暮霭深。明月掩层云，霜天暮霭深。明月掩层云，霜天暮霭深。城郊六载地，风冷更重临。城郊六载地，风冷更重临。城郊六载地，风冷更重临。漠漠寒香往，笙歌足慕歆。漠漠寒香往，笙歌足慕歆。漠漠寒香往，笙歌足慕歆。但看新昨日，谈笑旧如今。但看新昨日，谈笑旧如今。但看新昨日，谈笑旧如今。","link":"https://mhxxx.github.io/post/gu-di-wan-you/"},{"title":"花开花落行","content":"春日融融春风过，春日融融春风过，春日融融春风过，风吹幽香珠帘落。风吹幽香珠帘落。风吹幽香珠帘落。莫道东风总无情，莫道东风总无情，莫道东风总无情，花开花落相交错。花开花落相交错。花开花落相交错。花开鸟合韵，花开鸟合韵，花开鸟合韵，花落水成文。花落水成文。花落水成文。林中笑靥徒映月，林中笑靥徒映月，林中笑靥徒映月，枝上残阳空啼血。枝上残阳空啼血。枝上残阳空啼血。花落有人送春去，花落有人送春去，花落有人送春去，花开有人拈花来。花开有人拈花来。花开有人拈花来。谁知花开是何日，谁知花开是何日，谁知花开是何日，又知花落是几时？又知花落是几时？又知花落是几时？但作花开花落吟，但作花开花落吟，但作花开花落吟，不忍夜闻花落声。不忍夜闻花落声。不忍夜闻花落声。","link":"https://mhxxx.github.io/post/hua-kai-hua-luo-xing/"},{"title":"赠别·任俊英","content":"芙蕖尚开短，芙蕖尚开短，芙蕖尚开短，夏夜雨打残。夏夜雨打残。夏夜雨打残。落蕾碧溪上，落蕾碧溪上，落蕾碧溪上，乱红随风远。乱红随风远。乱红随风远。待到晴初日，待到晴初日，待到晴初日，长留清香暖。长留清香暖。长留清香暖。霜月盈盈处，霜月盈盈处，霜月盈盈处，杨柳送秋烟。杨柳送秋烟。杨柳送秋烟。","link":"https://mhxxx.github.io/post/zeng-bie-ren-jun-ying/"},{"title":"杂句","content":"花皑皑花皑皑花皑皑柳依依柳依依柳依依春色入园迟春色入园迟春色入园迟青葱恋鸟飞青葱恋鸟飞青葱恋鸟飞","link":"https://mhxxx.github.io/post/za-ju/"},{"title":"乙未年大雪","content":"君不见万里山河，九州一夜砌莹装。君不见万里山河，九州一夜砌莹装。君不见万里山河，九州一夜砌莹装。君不见白雪飘飞，破除四海皆苍茫。君不见白雪飘飞，破除四海皆苍茫。君不见白雪飘飞，破除四海皆苍茫。玉树银花照春色，积雪凝冰映月光。玉树银花照春色，积雪凝冰映月光。玉树银花照春色，积雪凝冰映月光。东方将晓似蝶舞，忽然羊角燕雀翔。东方将晓似蝶舞，忽然羊角燕雀翔。东方将晓似蝶舞，忽然羊角燕雀翔。迎头盖面只偷眼，雪剑风刀破衣裳。迎头盖面只偷眼，雪剑风刀破衣裳。迎头盖面只偷眼，雪剑风刀破衣裳。应是将军夜袭敌，风如快马雪如缰，路上行人漫仓皇。应是将军夜袭敌，风如快马雪如缰，路上行人漫仓皇。应是将军夜袭敌，风如快马雪如缰，路上行人漫仓皇。徙倚阑干望，白雪封大荒。徙倚阑干望，白雪封大荒。徙倚阑干望，白雪封大荒。江国正寂寂，风动一帘疏影，似有苦梅香江国正寂寂，风动一帘疏影，似有苦梅香江国正寂寂，风动一帘疏影，似有苦梅香","link":"https://mhxxx.github.io/post/yi-wei-nian-da-xue/"},{"title":"扬州梦","content":"楼上灯花楼外明，楼上灯花楼外明，楼上灯花楼外明，秦淮歌舞画船轻。秦淮歌舞画船轻。秦淮歌舞画船轻。千里扬州一梦好，千里扬州一梦好，千里扬州一梦好，耳畔尤闻商女声。耳畔尤闻商女声。耳畔尤闻商女声。转眼喧嚣都散尽，转眼喧嚣都散尽，转眼喧嚣都散尽，湖光萧瑟玉楼倾。湖光萧瑟玉楼倾。湖光萧瑟玉楼倾。苍天不改依前月，苍天不改依前月，苍天不改依前月，要为伶人搏幸名。要为伶人搏幸名。要为伶人搏幸名。","link":"https://mhxxx.github.io/post/yang-zhou-meng/"},{"title":"夏日即兴","content":"其一流火催人寐，流火催人寐，流火催人寐，谷风催麦熟。谷风催麦熟。谷风催麦熟。农家有闲者，农家有闲者，农家有闲者，晒麦且读书。晒麦且读书。晒麦且读书。其二绿树锦鲤嬉，绿树锦鲤嬉，绿树锦鲤嬉，清波百鸟栖。清波百鸟栖。清波百鸟栖。偷得何处连天雨，偷得何处连天雨，偷得何处连天雨，潇潇人影稀。潇潇人影稀。潇潇人影稀。其三昔日夏炎炎，昔日夏炎炎，昔日夏炎炎，蝉鸣蛙也噪。蝉鸣蛙也噪。蝉鸣蛙也噪。一旦秋风紧，一旦秋风紧，一旦秋风紧，鸣噪自两消。鸣噪自两消。鸣噪自两消。今年夏炎炎，今年夏炎炎，今年夏炎炎，蛙静蝉也悄。蛙静蝉也悄。蛙静蝉也悄。只待秋风紧，只待秋风紧，只待秋风紧，此响恸云霄。此响恸云霄。此响恸云霄。","link":"https://mhxxx.github.io/post/xia-ri-ji-xing/"},{"title":"年年岁岁无新景","content":"年年岁岁无新景，年年岁岁无新景，年年岁岁无新景，笔下犹思去日情。笔下犹思去日情。笔下犹思去日情。料应天公知我意，料应天公知我意，料应天公知我意，晴空骤转雪又停。晴空骤转雪又停。晴空骤转雪又停。","link":"https://mhxxx.github.io/post/nian-nian-sui-sui-wu-xin-jing/"},{"title":"我生","content":"车马至歧路，车马至歧路，车马至歧路，转道归故乡。转道归故乡。转道归故乡。大雪忽骤至，大雪忽骤至，大雪忽骤至，再添旧衣裳。再添旧衣裳。再添旧衣裳。切切如雨落，切切如雨落，切切如雨落，飘飘若举鸿。飘飘若举鸿。飘飘若举鸿。北风寒不止，北风寒不止，北风寒不止，寒我在心中。寒我在心中。寒我在心中。冬至何处寻，冬至何处寻，冬至何处寻，瓦上千层霜。瓦上千层霜。瓦上千层霜。此间北风止，此间北风止，此间北风止，寒来暑将往。寒来暑将往。寒来暑将往。我生亦如是，我生亦如是，我生亦如是，壮观寂寞行！壮观寂寞行！壮观寂寞行！","link":"https://mhxxx.github.io/post/wo-sheng/"},{"title":"望天","content":"天外有天山外山，天外有天山外山，天外有天山外山，练得红尘心更坚。练得红尘心更坚。练得红尘心更坚。风鹏一展九万里，风鹏一展九万里，风鹏一展九万里，扶摇直上破云巅。扶摇直上破云巅。扶摇直上破云巅。","link":"https://mhxxx.github.io/post/wang-tian/"},{"title":"晚秋舞柳","content":"行人二三游画中，行人二三游画中，行人二三游画中，婆娑柳影万里空。婆娑柳影万里空。婆娑柳影万里空。羡秋黄叶柔枝舞，羡秋黄叶柔枝舞，羡秋黄叶柔枝舞，何必杨柳赶春风。何必杨柳赶春风。何必杨柳赶春风。笔墨尤喜秋悲晚，笔墨尤喜秋悲晚，笔墨尤喜秋悲晚，即入秋色画难成。即入秋色画难成。即入秋色画难成。秋鸿霎影无意在，秋鸿霎影无意在，秋鸿霎影无意在，几次春秋怕相逢。几次春秋怕相逢。几次春秋怕相逢。","link":"https://mhxxx.github.io/post/wan-qiu-wu-liu/"},{"title":"桃花","content":"霓裳轻舞袅芳菲，霓裳轻舞袅芳菲，霓裳轻舞袅芳菲，旖旎浮霞云梦回。旖旎浮霞云梦回。旖旎浮霞云梦回。红颜淡抹胭脂色，红颜淡抹胭脂色，红颜淡抹胭脂色，春风不辞化蝶追。春风不辞化蝶追。春风不辞化蝶追。","link":"https://mhxxx.github.io/post/tao-hua/"},{"title":"石鼓歌","content":"陈仓河畔巧画云，陈仓河畔巧画云，陈仓河畔巧画云，错落珠玑缺月隐。错落珠玑缺月隐。错落珠玑缺月隐。断句残章毁音律，断句残章毁音律，断句残章毁音律，强推百日识先秦。强推百日识先秦。强推百日识先秦。东坡才浅秀良莠，东坡才浅秀良莠，东坡才浅秀良莠，少陵文薄已无人。少陵文薄已无人。少陵文薄已无人。世间尤有石鼓在，世间尤有石鼓在，世间尤有石鼓在，寻得何处藏我文。寻得何处藏我文。寻得何处藏我文。","link":"https://mhxxx.github.io/post/shi-gu-ge/"},{"title":"十二月雨雪初作","content":"繁世难相度，繁世难相度，繁世难相度，回首来时路。回首来时路。回首来时路。落花去欲尽，落花去欲尽，落花去欲尽，苍山遮不住。苍山遮不住。苍山遮不住。倦鸟归林旧，倦鸟归林旧，倦鸟归林旧，病狐向丘故。病狐向丘故。病狐向丘故。吾心欲何往，吾心欲何往，吾心欲何往，暮雨潇湘处。暮雨潇湘处。暮雨潇湘处。","link":"https://mhxxx.github.io/post/shi-er-yue-yu-xue-chu-zuo/"},{"title":"十二岁作","content":"天下人人笑我痴，天下人人笑我痴，天下人人笑我痴，我笑天下才不识。我笑天下才不识。我笑天下才不识。十年寒窗唯一梦，十年寒窗唯一梦，十年寒窗唯一梦，天马行空未可知。天马行空未可知。天马行空未可知。","link":"https://mhxxx.github.io/post/shi-er-sui-zuo/"},{"title":"少年令","content":"白日当空头，白日当空头，白日当空头，大睡载渔舟。大睡载渔舟。大睡载渔舟。醒后梦一场，醒后梦一场，醒后梦一场，我自难挽留。我自难挽留。我自难挽留。年年结欢笑，年年结欢笑，年年结欢笑，日日上青楼。日日上青楼。日日上青楼。家财挥霍尽，家财挥霍尽，家财挥霍尽，换我数风流。换我数风流。换我数风流。有朋销酒馔，有朋销酒馔，有朋销酒馔，来客极娱游。来客极娱游。来客极娱游。耳边无数笑，耳边无数笑，耳边无数笑，胸中一点愁。胸中一点愁。胸中一点愁。不知愁何谓，不知愁何谓，不知愁何谓，谁意君何忧。谁意君何忧。谁意君何忧。家中孔夫子，家中孔夫子，家中孔夫子，枕旁十三经。枕旁十三经。枕旁十三经。卧读寝不暖，卧读寝不暖，卧读寝不暖，坐看衣更薄。坐看衣更薄。坐看衣更薄。文章何处起？文章何处起？文章何处起？作诗无心思。作诗无心思。作诗无心思。知音尤难觅，知音尤难觅，知音尤难觅，红颜安敢求。红颜安敢求。红颜安敢求。我生无滋味，我生无滋味，我生无滋味，不如做鱼鸟。不如做鱼鸟。不如做鱼鸟。做鱼有比目，做鱼有比目，做鱼有比目，做鸟成鸳鸯。做鸟成鸳鸯。做鸟成鸳鸯。我死无可怜，我死无可怜，我死无可怜，不知谁忆否？不知谁忆否？不知谁忆否？埋骨汉河畔，埋骨汉河畔，埋骨汉河畔，千载自幽幽。千载自幽幽。千载自幽幽。","link":"https://mhxxx.github.io/post/shao-nian-ling/"},{"title":"秋风西来秋风狂","content":"秋风西来秋风狂，秋风西来秋风狂，秋风西来秋风狂，吹尽黄金满地香。吹尽黄金满地香。吹尽黄金满地香。取次幽径一夜春，取次幽径一夜春，取次幽径一夜春，留取一枝春欲绽。留取一枝春欲绽。留取一枝春欲绽。插画云鬓还起舞，插画云鬓还起舞，插画云鬓还起舞，莫笑此时老豪放。莫笑此时老豪放。莫笑此时老豪放。低头顾影影自怜，低头顾影影自怜，低头顾影影自怜，元知恣意在梦乡。元知恣意在梦乡。元知恣意在梦乡。","link":"https://mhxxx.github.io/post/qiu-feng-xi-lai-qiu-feng-kuang/"},{"title":"秋词","content":"菊花开菊花开菊花开菊花残菊花残菊花残月暝织影痩月暝织影痩月暝织影痩风冷沁窗寒风冷沁窗寒风冷沁窗寒浇心夜雨哭长恨浇心夜雨哭长恨浇心夜雨哭长恨撩乱情思话不眠撩乱情思话不眠撩乱情思话不眠安白首安白首安白首枉凭栏枉凭栏枉凭栏当时青云志当时青云志当时青云志醉卧流水间醉卧流水间醉卧流水间如今云水依前在如今云水依前在如今云水依前在人不似、旧当年人不似、旧当年人不似、旧当年","link":"https://mhxxx.github.io/post/qiu-ci/"},{"title":"七夕","content":"昨夜雨兼昨夜风，昨夜雨兼昨夜风，昨夜雨兼昨夜风，今宵一刻鹊桥中。今宵一刻鹊桥中。今宵一刻鹊桥中。犹怜花月无人问，犹怜花月无人问，犹怜花月无人问，道是无情却有情。道是无情却有情。道是无情却有情。","link":"https://mhxxx.github.io/post/qi-xi/"},{"title":"七绝·我有相思不能说","content":"闻&quot;我有相思不可说&quot;,甚是欢喜,遂排其律,作轱辘体三首其一我有相思不能说，我有相思不能说，我有相思不能说，孤灯照影覆前辙。孤灯照影覆前辙。孤灯照影覆前辙。为君留取梦中花，为君留取梦中花，为君留取梦中花，莫向春风容易别。莫向春风容易别。莫向春风容易别。其二春风未语先凄咽，春风未语先凄咽，春风未语先凄咽，我有相思不能说。我有相思不能说。我有相思不能说。好景年年何处归？好景年年何处归？好景年年何处归？桃花飞尽杨花雪。桃花飞尽杨花雪。桃花飞尽杨花雪。其三寒雨迷濛寒未绝，寒雨迷濛寒未绝，寒雨迷濛寒未绝，从前最苦思君切。从前最苦思君切。从前最苦思君切。如今最苦是相逢，如今最苦是相逢，如今最苦是相逢，我有相思不能说。我有相思不能说。我有相思不能说。","link":"https://mhxxx.github.io/post/qi-jue-wo-you-xiang-si-bu-neng-shuo/"},{"title":"美人诗","content":"丹唇未启笑先闻，丹唇未启笑先闻，丹唇未启笑先闻，步履凌波总似春。步履凌波总似春。步履凌波总似春。柳条游丝柳叶眉，柳条游丝柳叶眉，柳条游丝柳叶眉，桃粉衣裳桃绿裙。桃粉衣裳桃绿裙。桃粉衣裳桃绿裙。眼中长把芳尘觅，眼中长把芳尘觅，眼中长把芳尘觅，奈何一去无处寻。奈何一去无处寻。奈何一去无处寻。红颜怎堪流年易，红颜怎堪流年易，红颜怎堪流年易，又闻笑语启丹唇。又闻笑语启丹唇。又闻笑语启丹唇。","link":"https://mhxxx.github.io/post/mei-ren-shi/"},{"title":"梅","content":"枝桠破寒窗，枝桠破寒窗，枝桠破寒窗，白上一点霜。白上一点霜。白上一点霜。随意北风起，随意北风起，随意北风起，同醉夜留香。同醉夜留香。同醉夜留香。","link":"https://mhxxx.github.io/post/mei/"},{"title":"立冬","content":"庭树绿意浓，庭树绿意浓，庭树绿意浓，月季一园开。月季一园开。月季一园开。北风携冷意，北风携冷意，北风携冷意，方觉冬日来。方觉冬日来。方觉冬日来。","link":"https://mhxxx.github.io/post/li-dong/"},{"title":"立春","content":"城楼柳乱人影稀，城楼柳乱人影稀，城楼柳乱人影稀，小酥日光拂我衣。小酥日光拂我衣。小酥日光拂我衣。盼春不觉春已至，盼春不觉春已至，盼春不觉春已至，迎春放蕾鸟初啼。迎春放蕾鸟初啼。迎春放蕾鸟初啼。","link":"https://mhxxx.github.io/post/li-chun/"},{"title":"客少星稀晨月黑","content":"客少星稀晨月黑，客少星稀晨月黑，客少星稀晨月黑，风灯烟柳照金鞍。风灯烟柳照金鞍。风灯烟柳照金鞍。春华秋草伤心处，春华秋草伤心处，春华秋草伤心处，火树银花又一年。火树银花又一年。火树银花又一年。","link":"https://mhxxx.github.io/post/ke-shao-xing-xi-chen-yue-hei/"},{"title":"可怜无往悬青天","content":"江山万里无哀鸿，江山万里无哀鸿，江山万里无哀鸿，不休歌舞闹殿宫。不休歌舞闹殿宫。不休歌舞闹殿宫。龙凤宫里阎王殿，龙凤宫里阎王殿，龙凤宫里阎王殿，无情阎王牛马面。无情阎王牛马面。无情阎王牛马面。击鼓寻道欲雪冤，击鼓寻道欲雪冤，击鼓寻道欲雪冤，阳间阴间行不通。阳间阴间行不通。阳间阴间行不通。尸抛荒岭不觅处，尸抛荒岭不觅处，尸抛荒岭不觅处，寒鸦野豺无意争。寒鸦野豺无意争。寒鸦野豺无意争。江流何不似明镜，江流何不似明镜，江流何不似明镜，可怜无往悬青天。可怜无往悬青天。可怜无往悬青天。","link":"https://mhxxx.github.io/post/ke-lian-wu-wang-xuan-qing-tian/"},{"title":"济世篇","content":"神药出深山，神药出深山，神药出深山，风云莫等闲。风云莫等闲。风云莫等闲。时世晓真意，时世晓真意，时世晓真意，悬壶济人间。悬壶济人间。悬壶济人间。","link":"https://mhxxx.github.io/post/ji-shi-pian/"},{"title":"东方既白","content":"长安不见雪，长安不见雪，长安不见雪，腊月晓寒新。腊月晓寒新。腊月晓寒新。霜重两湖水，霜重两湖水，霜重两湖水，风轻一夜云。风轻一夜云。风轻一夜云。","link":"https://mhxxx.github.io/post/dong-fang-ji-bai/"},{"title":"RestTemplate配置代理","content":"HttpClientBuilderclientBuilder=HttpClientBuilder.create();clientBuilder.useSystemProperties();Propertiesprops=System.getProperties();Stringhost=props.getProperty(&quot;http.proxyHost&quot;);Stringport=props.getProperty(&quot;http.proxyPort&quot;);Stringuser=props.getProperty(&quot;http.proxyUser&quot;);Stringpassword=props.getProperty(&quot;http.proxyPassword&quot;);log.info(&quot;代理参数host:{}port:{}user:{}password:{}&quot;,host,port,user,password);if(StringUtils.isNotEmpty(host)&amp;&amp;StringUtils.isNotEmpty(port)){clientBuilder.setProxy(newHttpHost(host,Integer.parseInt(port)));log.info(&quot;使用了代理,设置代理地址完成&quot;);if(StringUtils.isNotEmpty(user)&amp;&amp;StringUtils.isNotEmpty(password)){CredentialsProvidercredsProvider=newBasicCredentialsProvider();credsProvider.setCredentials(newAuthScope(host,Integer.parseInt(port)),newUsernamePasswordCredentials(user,password));clientBuilder.setDefaultCredentialsProvider(credsProvider);clientBuilder.setProxyAuthenticationStrategy(newProxyAuthenticationStrategy());log.info(&quot;使用了代理验证,设置代理验证完成&quot;);}}CloseableHttpClientbuild=clientBuilder.build();HttpComponentsClientHttpRequestFactoryfactory=newHttpComponentsClientHttpRequestFactory();factory.setHttpClient(build);restTemplate.setRequestFactory(factory);","link":"https://mhxxx.github.io/post/resttemplate-pei-zhi-dai-li/"},{"title":"2021总结","content":"工作上吧时间过的总是很快,2021年转瞬即逝,翻看日记,这年元旦我还在家里处理工作上的事情.客流上吾悦项目和华为项目最烦人,尤其是华为项目,三天两头要去给他们处理问题,最好玩的是redis性能问题是由他们自己redis集群引起的,一个命令能执行几秒.由于2020年末做出了ES特征比对,某个奖提了个名,几百块.客流今年由于人脸问题,全面转向人体方面的业务了.头几个月的客流还是我和娄统,李苗在做,4月左右娄统要离职了,翟柏林,胡力强来接客流的事情,后来袁津也来了.胡力强是工作没多长时间的应届生好像,翟柏林技术不行,袁津还好.先帮他们熟悉项目.6月中旬我去了交通项目组开始着手繁星3.0的项目,设计数据库,流程图架构图什么的,还要写文档,这是我第一次独自负责一个完整的项目.繁星3.0项目期间,让我的技术有了进一步成长.第一次将微服务架构完整地用在了项目上,consol作为服务治理和配置中心,gateway作为网关.苦于没有前端,项目拖到2021年最后一天才差不多发布了,总体运行上还算可以,很烦的一点就是后来的产品设计和最初的理念有很大出入,一开始设计的是要极简化,可是架构设计完,代码写的差不多了,产品原型才出来,看完后感觉又是一个臃肿的平台.繁星3.0期间还做了一个标注平台,完成了REID标注部分,逻辑挺繁琐的,但是这个项目让我对redisson有了更多的应用,由于用到了ES来比对特征,对ES也有了更深入的了解.权限验证基于sa-token做的,这个封装的挺不错的,但实际性能还没测过.接手了熊付的赋能平台,软件给算法包一层壳,这个平台就是给软件包了一层壳,学了JNI,JNA相关的知识.交通项目组我个人感觉有个问题就是,没有一个人能将所有项目统筹兼顾,不能在工作上进行合理的调度,东西很多很散,刚加入的员工做事简直是事倍功半.客流平台就没这种问题,因为有我ᕙ༼ຈلﻝ͜ຈ༽ᕗ.今年娄统,葛青博,齐乃乐,谢老师,熊付,潘建波相继离职,心里感觉五味杂陈.今年公司团建有阳台山爬山,司庆庆吃饭开会爬山(天津),运动会.今年公司也开始注重加班了,我还是不喜欢加班.成长时间轮算法(应用在reid定时任务上)docker(对docker的用法有了更多的了解)尝试了云服务器,搭建V2RAY的代理,使用免费域名ElasticSearch(对ES有了更深入的了解,主要用于特征比对,仍然觉得它不能替代关系型数据库)使用更多的文档工具,docsify,gitbook,showdoc,后者我将其从个人使用推广到交通组使用,最后剑鸣决定所有研发使用.基于ffmpeg+srs的视频平台Quarkus框架,以及反应式编程.基于RSS订阅,阅读了很多优质的文章,从字里行间去了解他人的生活,技术,思想,令人感到很充实.Disruptor一个高性能内存队列生活上吧今年应该是25岁了吧,但怎么都没有25岁的感觉,时光对于我来时仍然是让人云里雾里的东西.今年由于疫情原因是在北京过的年,一人一猫,虽然是不错的独处,但仍少了些亲情友情带来的心灵上的慰藉.今年确实很喜欢骑行,尤其是在看到90KG的体重时候,哈哈.期间最远的一次是往返十渡,骑了210公里,之后在家修养了两天才缓过来.通过骑车体重成功的减到75KG,腿上的肌肉摸着就很结实,可以说是今年最有成就感的事了.备受牙痛折磨,最严重的的是一天晚上疼的睡不着,一天白天疼的没法工作.去医院看了是慢性牙髓炎,要做根管治疗.前前后后跑了五六趟,花了五千多,才做完根管治疗还差个牙冠修复.左边牙齿也有损坏,拔掉了一颗.牙齿治疗完后感觉好了太多,尤其是吃饭.一定要爱惜牙齿啊.身体上,腰疼,脖子疼,以后要注意坐姿啊.看了一些动漫,排球少年,骑行少女,飙速宅男,轻音少女,看轻音少女时总是能让我感到美好,音乐也很好听,描绘的人和事令人心生向往,总之轻音少女一生推.听了一些音乐,大都是日本的,最喜欢的乐队仍然是和乐器乐团,对华语乐坛无语至极,总之就是无语至极,无语至极!玩了一些游戏,像鬼谷八荒,刺客信条-英灵殿,地牢迷途,奥日,盐与避难所,地平线5,仁王2,漫野奇谭,归家异途,天命奇御2,嗜血印,如龙7,泰瑞利亚,怪物猎人-崛起,极乐迪斯科,赛博朋克2077,无主之地3,莱莎的炼金工房2,光明记忆,帝国神话,凯娜-精神之桥,循环英雄,点击饼干,莫塔守山人,双人成行,英雄联盟,永劫无间,小骨-英雄杀手等等,大部分是没玩多少的.今年网上令我印象深刻的话题有:男女对立,对于雄狮少年的争论,内卷躺平割韭菜.原本的计划是想看书的,但是嘛,一言难尽,唉,你不能再堕落下去了啊胡适之.将很多家饭馆加入到了收藏中,但是嘛,一家都没去,哈哈.没有中意的姑娘,也没有被姑娘中意,没谈过恋爱的我,仍对美好的爱恋抱有许多期待和些许胆怯.既然没有中意的姑娘,那么也没必要拾掇自己,衣服鞋子多是捡便宜的买,超过200元就有点抵触,原因嘛,穷.夏天就是短袖短裤,冬天就运动裤短袖一件羽绒服.细数我的衣服,其中球衣骑行服竟然占了多数.合租的同学有女朋友了,还要带回家同居,啧啧,我竟然才知道.2021,又是伴随着红白歌会而落幕.新的一年,新的期待.投资从去年开始投的基金,主要是白酒,10w元左右,在过年前一天盈利达到3w多,年后第一天就开始大跌,最后利润跌走了一半出掉了.后来开始进军股市,微博上找了一个博主跟着操作,后来还加了群,都是短线操作,投入也不大就几万元,小挣一笔.后来这个博主开启了杀猪模式,我退群开始了自己在股市的摸索.看中了比亚迪这只股票,在170时投入了14w元,后来总共买到了10手1000股,一开始先是跌到了140左右,之后开始涨,涨到了260左右我贪心没卖出又开始跌.跌到220元我慌了,全部卖出,有些盈利但不多,后来比亚迪一路飞涨到330,我哎-_-!中间陆续买了一些股票,像江西铜业,云铝股份,天齐锂业,赣锋锂业,歌尔股份,三安光电,多氟多,三峡能源,长安汽车,八一钢铁,泸州老窖,士兰微,北方稀土,五粮液,药明康德,中国平安,恒瑞医药,国电南自,天音控股,中远海控,四川成渝,其中泸州老窖和药明康德跌的最惨,其他的有涨有跌,总体上是盈利的.最后一次大额投资是美锦能源,从11元开始陆续买入,买到14元,看着股价一路上涨,我又贪心了,15元的时候盈利有5w多没有获利了结,之后开始跌,跌完利润跌本金,股价跌到最低10元,本金最多跌了2w元(15元时算上之前的获利大概有7w,全跌光了),我开始佛系,但还是坚定持有,果然不负我所望,到12月中旬股价涨到了19.77元,利润最高达到10w多,但此时我又贪心了,觉得还能继续突破,但股价开始断崖式下跌,截止2021年最后一个交易日,股价达到16.23元.对于美锦能源我还是很看好的,两点,一个是氢能源概念,一个是冬奥会概念,这两点值得我继续持有.2021年是新能源和半导体起飞的一年,尤其是锂电方面的股票.2022年我觉得仍然是新能源的主场,氢能源是一个很好的投资点.希望能在2022年能够控制好自己的投资情绪,并且收获更多.杂记3月8号骑了一天后,直到4月6号才开始正式骑车上下班4月9日客流组聚餐,吃饭后称了一下体重,90公斤,今天是下定决心减肥的日子买了画猫的八件手办,以及qualia猫笔架一套GEEKFLYGF10真无线耳机,主打音质,音质确实不错4月30日带音响爬阳台山,早上下雨中午放晴,气氛挺好今年就劳动节放假回家了,哎4月开始挖矿,直到11月,差不多挖了一张显卡的钱5月23日喜提美利达斯特拉95,腿短是硬伤6月12日端午放假第一天,骑车十渡往返,最高温度37度,喝水15瓶,往返距离200+KM北大口腔医院看牙,用了好长时间,牙不疼的感觉真是太好了6月27号公司司庆,坐车吃饭看演出照顾胡立强(喝多了),第二天没休息好爬山,最后还是登顶了,陪着我的还是音响.6月30日开启了人生中第一次冰雹骑,从开始下雨到雨水汇成一条河流,只用了短短不到3分钟,又是两分钟冰雹开始向我袭来,幸好戴了头盔.顶着冰雹骑了两公里上了地铁站.8月中旬,体重成功降到了75KG今年是多雨的一年,今年的北京,像是一个打着油纸伞的丁香花般的姑娘.下雨天要么不能骑车要么骑车全是泥.我已经住到北京6环了,但它竟然还能堵车,竟然还能让我一个骑自行车的被堵车,无语至极.踢球,越踢越菜,但是踢球能令人开心.10月8日人生中第一次出差,没有笔记本电脑的我体验了一次不理想的出差.12月31日,红白歌会红组赢了.今年出现了很多好听的音乐.展望20222020年买的技术课程2021年没怎么看,明年要有所改变参与至少一个开源项目完成一个工作之外的项目继续骑行,踢球,锻炼身体,保持体重在75甚至70以下在投资上更进一步希望疫情有所好转,能够回家过年继续写日记,写博文一些照片你是爱,是暖,是希望,你是北京的四月天~《自然》杂志评选了本年度的最佳科学照片，上面是其中的一张，科学家在电子显微镜下面，使用纳米分子完成的《纳米海滩》画作。","link":"https://mhxxx.github.io/post/2021总结/"},{"title":"ES 节点平滑下线","content":"1.排除节点通过以下方式将节点从集群排除url:http://localhost:9200/_cluster/settingsmethod:PUTbody:{&quot;transient&quot;:{&quot;cluster.routing.allocation.exclude._name&quot;:&quot;{node.name}&quot;}}上面其实会触发分片的Allocation机制，涉及的参数为cluster.routing.allocation.exclude.{attribute}，其中{attribute}表示节点的匹配方式，支持三种：_name：匹配node名称，多个node名称用逗号隔开；_ip：匹配nodeip地址，多个地址用逗号隔开；_host：匹配node主机名，多个主机名用逗号隔开；2.等待所有分片迁移完成上一步执行后，不能马上停服务，必须要等待所有分片迁移到其他节点，若安装了EShead插件，建议通过界面查看分区迁移情况与集群健康状态。也可以通过以下命令查看url:http://localhost:9200/_cat/shardsmethod:GET查看是否存在RELOCATING状态的分片所有分片迁移完成后，可再通过以下命令查看节点数据是否已迁移，都是0表示数据也已经迁移url:http://localhost:9200/_nodes/{node.name}/stats/indices?prettymethod:GETresponse:{...&quot;indices&quot;:{&quot;docs&quot;:{&quot;count&quot;:0,&quot;deleted&quot;:0},&quot;store&quot;:{&quot;size_in_bytes&quot;:0},...}3.停掉节点4.恢复集群路由策略url:http://localhost:9200/_cluster/settingsmethod:PUTbody:{&quot;transient&quot;:{&quot;cluster.routing.allocation.exclude._name&quot;:null}}","link":"https://mhxxx.github.io/post/ES-节点平滑下线/"},{"title":"开发笔记","content":"1.Jackson配置不生效程序中使用@EnableWebMvc时配置文件中有关Jackson的配置不会生效Asdescribedinthedocumentation,whenyouuse@EnableWebMvcyouareindicatingthatyouwilltakecompletecontroloverSpringMVC'sconfiguration.ThatincludesconfiguringhowitusesJacksontorenderresponseshttps://github.com/spring-projects/spring-boot/issues/99412.下载文件中文名乱码以及指定文件编码类型以及文件大小response.setContentType(MediaType.APPLICATION_OCTET_STREAM_VALUE);response.setHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename=&quot;+URLEncoder.encode(filename,&quot;utf8&quot;));response.setContentLength(decode.length);3.gateway踩坑1.使用feign时需要自己装载HttpMessageConverters@BeanpublicHttpMessageConvertershttpMessageConverters(MyMappingJackson2HttpMessageConverterconverter){returnnewHttpMessageConverters(converter);}@BeanpublicDecoderfeignDecoder(MyMappingJackson2HttpMessageConverterconverter){ObjectFactory&lt;HttpMessageConverters&gt;factory=()-&gt;newHttpMessageConverters(converter);returnnewOptionalDecoder(newResponseEntityDecoder(newSpringDecoder(factory)));}@BeanpublicMyMappingJackson2HttpMessageConvertermappingJackson2HttpMessageConverter(){returnnewMyMappingJackson2HttpMessageConverter();}publicstaticclassMyMappingJackson2HttpMessageConverterextendsMappingJackson2HttpMessageConverter{publicMyMappingJackson2HttpMessageConverter(){List&lt;MediaType&gt;mediaTypeList=newArrayList&lt;&gt;(this.getSupportedMediaTypes());mediaTypeList.add(MediaType.TEXT_PLAIN);this.setSupportedMediaTypes(mediaTypeList);}}2.gateway服务不能包含tomcat的依赖3.filter中调用feign会报错java.lang.IllegalStateException:block()/blockFirst()/blockLast()areblocking,whichisnotsupportedinthreadreactor-http-nio-N原因是gateway的filter是基于webFlux响应式的,而feign是同步的,所以要把调用改成异步调用也就是Future,例如:ExecutorServiceexecutorService=Executors.newCachedThreadPool();@OverridepublicMono&lt;Void&gt;filter(ServerWebExchangeexchange,GatewayFilterChainchain){ServerHttpRequestrequest=exchange.getRequest();if(vionConfig.getAuthEnabled()&amp;&amp;!skip(request)){Stringtoken=getToken(request);if(token==null){returnunAuthorized(exchange.getResponse(),&quot;authorizationfailed&quot;);}//鉴权ImmutablePair&lt;Boolean,String&gt;checkResult=checkToken(token);Booleansuccess=checkResult.left;if(!success){log.info(&quot;token校验未通过:[{}][{}]&quot;,checkResult.right,request.getPath());returnunAuthorized(exchange.getResponse(),checkResult.right);}//添加username到header中,供之后的服务使用ServerHttpRequestreq=request.mutate().headers(headers-&gt;headers.add(&quot;username&quot;,checkResult.right)).build();exchange.mutate().request(req).build();log.info(&quot;token校验成功:{}&quot;,token);}returnchain.filter(exchange);}privateImmutablePair&lt;Boolean,String&gt;checkToken(Stringtoken){//todoauthorizeStringusername;try{Map&lt;String,String&gt;api=newHashMap&lt;&gt;(2);api.put(&quot;verb&quot;,HttpMethod.POST.name());api.put(&quot;path&quot;,&quot;/api/v1/auth/authorize&quot;);Map&lt;String,Object&gt;perm=newHashMap&lt;&gt;(2);perm.put(&quot;type&quot;,&quot;api&quot;);perm.put(&quot;api&quot;,api);//webFlux是异步的,这里不能直接用feign调用Future&lt;JSONObject&gt;perm1=executorService.submit(()-&gt;authClient.checkToken(token,Collections.singletonMap(&quot;perm&quot;,perm)));JSONObjectjsonObject=perm1.get();username=jsonObject.getString(&quot;username&quot;);}catch(Exceptione){log.info(&quot;token校验失败:&quot;,e);returnImmutablePair.of(false,e.getLocalizedMessage());}returnImmutablePair.of(true,username);}也可以使用CompletableFuture.supplyAsync()方法4.RedissonLocalCachedMap对于同一个缓存对象,LocalCachedMap创建一次即可,多次创建会导致内存泄漏LocalCachedMap创建一次即可","link":"https://mhxxx.github.io/post/开发笔记/"},{"title":"Elasticsearch 集群配置参考","content":"资源说明假设有三台服务器名称ipA192.168.1.1B192.168.1.2C192.168.1.3每台服务器上部署一个es节点,并且设置密码集群配置Acluster.name:my-applicationnode.name:node1network.host:0.0.0.0http.port:9200cluster.initial_master_nodes:[&quot;node1&quot;]node.master:truenode.data:truehttp.cors.enabled:truehttp.cors.allow-origin:&quot;*&quot;cluster.max_shards_per_node:20000transport.tcp.port:9300discovery.seed_hosts:[&quot;192.168.1.2:9200&quot;,&quot;192.168.1.3:9200&quot;]Bcluster.name:my-applicationnode.name:node2network.host:0.0.0.0http.port:9200cluster.initial_master_nodes:[&quot;node1&quot;]node.master:truenode.data:truehttp.cors.enabled:truehttp.cors.allow-origin:&quot;*&quot;cluster.max_shards_per_node:20000transport.tcp.port:9300discovery.seed_hosts:[&quot;192.168.1.1:9200&quot;,&quot;192.168.1.3:9200&quot;]Ccluster.name:my-applicationnode.name:node3network.host:0.0.0.0http.port:9200cluster.initial_master_nodes:[&quot;node1&quot;]node.master:truenode.data:truehttp.cors.enabled:truehttp.cors.allow-origin:&quot;*&quot;cluster.max_shards_per_node:20000transport.tcp.port:9300discovery.seed_hosts:[&quot;192.168.1.1:9200&quot;,&quot;192.168.1.2:9200&quot;]加密访问1.在A服务器上生成证书bin/elasticsearch-certutilcert-outconfig/elastic-certificates.p12-pass&quot;&quot;2.拷贝到其他节点scpconfig/elastic-certificates.p12username@192.168.1.2:/.../config/elastic-certificates.p12scpconfig/elastic-certificates.p12username@192.168.1.3:/.../config/elastic-certificates.p123.修改每个节点的配置并启动xpack.security.enabled:truexpack.security.transport.ssl.enabled:truexpack.security.transport.ssl.verification_mode:certificatexpack.security.transport.ssl.keystore.path:config/elastic-certificates.p12xpack.security.transport.ssl.truststore.path:config/elastic-certificates.p12su-c&quot;bin/elasticsearch&quot;username可能遇到的问题是无法访问证书,查看证书的所属用户如果是root,需要改为es的用户chownusernameconfig/elastic-certificates.p124.设置密码使用cd命令切换到elasticsearch目录，然后使用bin/elasticsearch-setup-passwordsauto命令自动生成好几个默认用户和密码。如果想手动生成密码，则使用bin/elasticsearch-setup-passwordsinteractive命令。一般默认会生成好几个管理员账户，其中一个叫elastic的用户是超级管理员bin/elasticsearch-setup-passwordsinteractive","link":"https://mhxxx.github.io/post/Elasticsearch-集群配置参考/"},{"title":"收藏","content":"工具mybatis-generator界面工具，让你生成代码更简单更快捷Java诊断利器Arthas微信开发JavaSDK，支持包括微信支付，开放平台，小程序，企业微信，公众号等的后端开发WGCLOUD-linux运维监控工具AnotherRedisDesktopManager-redis桌面管理工具docsify-Amagicaldocumentationsitegenerator.HonKitisbuildingbeautifulbooksusingMarkdown-ForkofGitBookRealLive-一个跨平台的网络媒体聚合应用，支持直播视频，高清电视和广播电台的在线观看或收听。halo-一个优秀的开源博客发布应用。一个安静且优雅的Hexo主题性能开源RTSP流媒体服务器，基于go语言研发kiftd是一款专门面向个人、团队和小型组织的私有网盘系统showdoc一个非常适合IT团队的在线API文档、技术文档工具最好用的V2Ray一键安装脚本&amp;管理脚本使用PHP开发的目录索引系统docker-slimdocker瘦身工具在浏览器中解锁加密的音乐文件精选的Java编程语言框架，库和软件列表。YApi是一个可本地部署的、打通前后端及QA的、可视化的接口管理平台zfile在线云盘、网盘、OneDrive、云存储、私有云、对象存储、h5aiMyBookshelf是一款可以自定义来源阅读网络内容的工具，为广大网络文学爱好者提供一种方便、快捷舒适的试读体验。一个手机App，上传一张脸部照片和一首歌曲，它就会自动生成照片人物对口型唱歌的视频。一个实验性桌面程序，使用百度飞轮和Electron实现的AR剪贴和复制。手机先对准某人，再对准电脑屏幕，即可把他/她复制粘贴到桌面程序里面！喵语翻译-将文本加密成喵喵喵功能强大易用的截屏软件一个开源的笔记和待办事项应用程序，具有Windows、macOS、Linux、Android和iOS的同步功能PC版微信/QQ/TIM防撤回补丁pandoc通用文档格式转换器DirectoryOpuswindows上最好用的文件管理系统收费可破解listary文件浏览和搜索收费可破解everything免费文件搜索i5ting_tocmd转htmlscrew数据库表解构文档生成器utools工具集现代化的终端(ssh,shell,telnet,cmd,bash)Real-Esrgan旨在开发一种用于一般图像恢复的实用算法。推荐/资料好用的windowsApp推荐GitHub中文排行榜,发现优秀中文项目最新总结，阿里，腾讯，百度，美团，头条等技术面试题目，以及答案，专家出题人分析汇总一言古诗词后台技术栈/架构师之路/全栈开发社区，春招/秋招/校招/面试技术面试最后反问面试官的话中华人民共和国行政区划成为专业程序员路上用到的各种优秀资料、神器及框架Mall电商学习项目一份涵盖大部分Java程序员所需要掌握的核心知识。准备Java面试，首选JavaGuide！用动画的形式呈现解LeetCode题目的思路以动画的形式学习git的功能和原理后端架构师技术图谱互联网Java工程师进阶知识完全扫盲：涵盖高并发、分布式、高可用、微服务、海量数据处理等领域知识根据超过2000篇真实面经整理的腾讯，阿里，字节跳动，Shopee，美团，滴滴高频面试题以学习为目的,用Java实现非常多的算法springbootdemo是一个用来深度学习并实战springboot的项目，目前总共包含66个集成demo，已经完成55个。一个中文教程，介绍如何将FFmpeg集成进入安卓App，带有示例工程源码。新版1000多本计算机电子书免费下载免费的公开API集合free-api该网站提供世界五大洲的直播摄像头，可以看到世界各个地点的实况。解决电脑、手机看电视直播的苦恼，收集各种直播源，电视直播网站最全中华古诗词数据库,唐宋两朝近一万四千古诗人,接近5.5万首唐诗加26万宋诗.两宋时期1564位词人，21050首词。中国程序员容易发音错误的单词可以自己搭建的轻论坛其他SpringCloudspringboot配置加密hutooljava设计模式EL-ADMIN后台管理系统V2Ray路由规则文件加强版，可代替V2Ray官方geoip.dat和geosite.datv2rayN:v2rayGUIquarkussa-token这可能是史上功能最全的Java权限认证框架！Milkdown插件驱动的所见即所得的Markdown编辑器框架poi-tl(poi-template-language)使用模板生成awesomeword（docx）SOFAStack™（ScalableOpenFinancialArchitectureStack）是一套用于快速构建金融级云原生架构的中间件，也是在金融场景里锤炼出来的最佳实践。","link":"https://mhxxx.github.io/post/collections/"},{"title":"pandoc 使用教程","content":"PANDOCMarkdown是我平时编写各类材料和文章时最喜欢的工具之一，但将其作为文档分发时却略有些不便。毕竟不是所有人都了解Markdown的语法，而且它亦不如富文本文档易读。直至我发现了Pandoc，它可以将文档在Markdown、LaTeX、reStructuredText、HTML、Worddocx等多种标记格式之间相互转换，并支持输出PDF、EPUB、HTML幻灯片等多种格式。该程序被称为格式转换界的“瑞士军刀”。我平时大量使用该程序生成HTML和PDF文档，希望本文可以总结一些自己使用的心得。程序简介Pandoc的作者是JohnMacFarlane，他是加州大学伯克利分校的哲学系教授。Pandoc使用Haskell语言编写，被作者用来生成讲义、课件和网站等。该程序开源免费，目前以GPL协议托管在Github网站上。程序安装Pandoc的安装有许多方式，但本文只介绍最简单的方法。Pandoc的作者已经为Windows、macOS、Linux等操作系统分别制作了对应的程序安装包。要使用该程序，只需下载对应的程序安装包进行安装即可。对于Ubuntu等Linux发行版，Pandoc已经被集成到系统的软件源内，因此还可以直接从软件源安装：sudoapt-getinstallpandoc或者，如果你已经安装了Anaconda，那么你可以直接使用Pandoc了。该程序已经被集成到Anaconda中。参数说明Pandoc程序的命令使用方式为：pandoc&amp;lt;files&amp;gt;&amp;lt;options&amp;gt;其中&lt;files&gt;为输入的内容，其输入即可以来自文件，也可以来自标准输入甚至网页链接。而&lt;options&gt;为参数选项。主要的参数选项有：-f&lt;format&gt;、-r&lt;format&gt;：指定输入文件格式，默认为Markdown；-t&lt;format&gt;、-w&lt;format&gt;：指定输出文件格式，默认为HTML；-o&lt;file&gt;：指定输出文件，该项缺省时，将输出到标准输出；--highlight-style&lt;style&gt;：设置代码高亮主题，默认为pygments；-s：生成有头尾的独立文件（HTML，LaTeX，TEI或RTF）；-S：聪明模式，根据文件判断其格式；--self-contained：生成自包含的文件，仅在输出HTML文档时有效；--verbose：开启Verbose模式，用于Debug；--list-input-formats：列出支持的输入格式；--list-output-formats：列出支持的输出格式；--list-extensions：列出支持的Markdown扩展方案；--list-highlight-languages：列出支持代码高亮的编程语言；--list-highlight-styles：列出支持的代码高亮主题；-v、--version：显示程序的版本号；-h、--help：显示程序的帮助信息。虽然Pandoc提供了用于指定输入输出格式的参数，但是很多时候该参数不必使用。Pandoc已经足够聪明到可以根据文件名判断输入输出格式，所以除非文件名可能造成歧义，否则这两个参数都可以省略。使用示例信息查看查看程序支持的输入文件格式：\\$pandoc--list-input-formats查看程序支持代码高亮的编程语言：pandoc--list-highlight-languages查看程序帮助：pandoc--help生成HTML文档使用Pandoc可以很容易地将Markdown文档渲染为HTML网页：pandocdemo.md-odemo.html上面的命令将输出一个HTML文档，但该文档不包含任何样式，它的显示效果依赖于你使用的浏览器。我们当然希望可以得到排版更精美的文档，只要在转换时引入自己的层叠样式表CSS文件。输入的CSS文件可使用-c命令来指定：pandocdemo.md-cstyle.css-odemo.html如此输出的HTML文档已经包含样式文档了，平时自己查看时，效果很不错。但该方式依然存在部分问题。我们发布或共享文档时，需要传送至少两个文件：1个HTML文件和1个CSS文件，略有些不便。而如果文档中还包含多个本地图片等文件，共享文档几乎成了不可能的事情。好在Pandoc可以将外部文件嵌入到HTML文档中，生成一个自包含的独立文件：pandocdemo.md--self-contained-cstyle.css-odemo.html在该命令中，--self-contained参数指定：将任何的外部文件嵌入至输出的文件中，形成一个独立的HTML文档。这样传送资料时只传送一个文件就可以了，就像分享PDF文档一样方便。生成docx文档虽然我很喜欢使用HTML作为文档交换格式，但某些情况下你可能还是需要传送Worddocx文件。这也不是问题，Pandoc能够将所支持的输入文件一键转换为Worddocx格式。下面的命令将一份Markdown文件转换为docx格式：pandocdemo.md-odemo.docx下面的命令将HTML网页转换为docx格式：pandochttp://gnss.help/2017/06/12/pandoc-install-usage/-othis\\_page.docx需补充的是：Pandoc无法为生成的Worddocx文档指定排版方式。你可能需要二次编辑输出的文件，将标题、正文等调整为满意的样式。生成PDF文档使用Pandoc直接生成PDF文件时，需要安装LaTeX。并且，Pandoc自带的PDF引擎不支持中文，必须为中文配置额外的引擎和模板。Pandoc程序生成PDF文件的命令为：pandocdemo.md-odemo.pdf我生成PDF文档时，未使用以上的方法。而是采用HTML文件作为中间文件过渡，使用Windows系统的“打印到PDF”功能，将HTML文档进一步转换为所需的PDF文档。生成Markdown文档别忘了Markdown也是Pandoc支持的输出格式之一，我们可以将任何支持的输入格式转换为Markdown。这对于我们将之前的文档也切换到Markdown格式来说，实在是太方便了。下面的命令由Worddocx文档生成Markdown文件：pandocdemo.docx-odemo.md下面的命令由HTML网页生成Markdown文档：pandochttp://gnss.help/2017/06/12/pand层叠样式表文件决定最终的显示样式，因此有一个漂亮的CSS样式表文件非常重要。在此推荐两个CSS文件，首先是由AlbertoLeal制作的Github风格的样式表文件，它的显示效果类似于Github网站的README文档。","link":"https://mhxxx.github.io/post/pandoc/"},{"title":"Linux 磁盘分区挂载和热扩容","content":"查看磁盘信息fdisk-l对磁盘进行分区fdisk/dev/sdc#1.创建分区n#2.主分区e#3.分区号1#4.起始块和终止块#5.查看分区p#6.写入分区表w格式化分区mkfs-text4/dev/sdc1挂载磁盘mount/dev/sdc1/{dir}查看磁盘UUIDsudoblkid开机自动挂载vim/etc/fstab{disk}{targetDirector}ext4defaults00分区热扩容以/dev/vdb为例,只有一个主分区/dev/vdb1growpart/dev/vdb1resize2fs/dev/vdb1","link":"https://mhxxx.github.io/post/Linux-磁盘分区挂载和热扩容/"},{"title":"docker compose 文件 V3","content":"Composefileversion3referenceReferenceandguidelinesThesetopicsdescribeversion3oftheComposefileformat.Thisisthenewestversion.ComposefilestructureandexamplesHereisasampleComposefilefromthevotingappsampleusedintheDockerforBeginnerslabtopiconDeployinganapptoaSwarm:version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:alpineports:-&quot;6379&quot;networks:-frontenddeploy:replicas:2update_config:parallelism:2delay:10srestart_policy:condition:on-failuredb:image:postgres:9.4volumes:-db-data:/var/lib/postgresql/datanetworks:-backenddeploy:placement:max_replicas_per_node:1constraints:-&quot;node.role==manager&quot;vote:image:dockersamples/examplevotingapp_vote:beforeports:-&quot;5000:80&quot;networks:-frontenddepends_on:-redisdeploy:replicas:2update_config:parallelism:2restart_policy:condition:on-failureresult:image:dockersamples/examplevotingapp_result:beforeports:-&quot;5001:80&quot;networks:-backenddepends_on:-dbdeploy:replicas:1update_config:parallelism:2delay:10srestart_policy:condition:on-failureworker:image:dockersamples/examplevotingapp_workernetworks:-frontend-backenddeploy:mode:replicatedreplicas:1labels:[APP=VOTING]restart_policy:condition:on-failuredelay:10smax_attempts:3window:120splacement:constraints:-&quot;node.role==manager&quot;visualizer:image:dockersamples/visualizer:stableports:-&quot;8080:8080&quot;stop_grace_period:1m30svolumes:-&quot;/var/run/docker.sock:/var/run/docker.sock&quot;deploy:placement:constraints:-&quot;node.role==manager&quot;networks:frontend:backend:volumes:db-data:Thetopicsonthisreferencepageareorganizedalphabeticallybytop-levelkeytoreflectthestructureoftheComposefileitself.Top-levelkeysthatdefineasectionintheconfigurationfilesuchasbuild,deploy,depends_on,networks,andsoon,arelistedwiththeoptionsthatsupportthemassub-topics.Thismapstothe&lt;key&gt;:&lt;option&gt;:&lt;value&gt;indentstructureoftheComposefile.ServiceconfigurationreferenceTheComposefileisaYAMLfiledefiningservices,networksandvolumes.ThedefaultpathforaComposefileis./docker-compose.yml.Tip:Youcanuseeithera.ymlor.yamlextensionforthisfile.Theybothwork.Aservicedefinitioncontainsconfigurationthatisappliedtoeachcontainerstartedforthatservice,muchlikepassingcommand-lineparameterstodockerrun.Likewise,networkandvolumedefinitionsareanalogoustodockernetworkcreateanddockervolumecreate.Aswithdockerrun,optionsspecifiedintheDockerfile,suchasCMD,EXPOSE,VOLUME,ENV,arerespectedbydefault-youdon'tneedtospecifythemagainindocker-compose.yml.YoucanuseenvironmentvariablesinconfigurationvalueswithaBash-like${VARIABLE}syntax-seevariablesubstitutionforfulldetails.Thissectioncontainsalistofallconfigurationoptionssupportedbyaservicedefinitioninversion3.buildConfigurationoptionsthatareappliedatbuildtime.buildcanbespecifiedeitherasastringcontainingapathtothebuildcontext:version:&quot;{{site.compose_file_v3}}&quot;services:webapp:build:./dirOr,asanobjectwiththepathspecifiedundercontextandoptionallyDockerfileandargs:version:&quot;{{site.compose_file_v3}}&quot;services:webapp:build:context:./dirdockerfile:Dockerfile-alternateargs:buildno:1Ifyouspecifyimageaswellasbuild,thenComposenamesthebuiltimagewiththewebappandoptionaltagspecifiedinimage:build:./dirimage:webapp:tagThisresultsinanimagenamedwebappandtaggedtag,builtfrom./dir.NotewhenusingdockerstackdeployThebuildoptionisignoredwhendeployingastackinswarmmodeThedockerstackcommanddoesnotbuildimagesbeforedeploying.contextEitherapathtoadirectorycontainingaDockerfile,oraurltoagitrepository.Whenthevaluesuppliedisarelativepath,itisinterpretedasrelativetothelocationoftheComposefile.ThisdirectoryisalsothebuildcontextthatissenttotheDockerdaemon.Composebuildsandtagsitwithageneratedname,andusesthatimagethereafter.build:context:./dirdockerfileAlternateDockerfile.Composeusesanalternatefiletobuildwith.Abuildpathmustalsobespecified.build:context:.dockerfile:Dockerfile-alternateargsAddbuildarguments,whichareenvironmentvariablesaccessibleonlyduringthebuildprocess.First,specifytheargumentsinyourDockerfile:#syntax=docker/dockerfile:1ARGbuildnoARGgitcommithashRUNecho&quot;Buildnumber:$buildno&quot;RUNecho&quot;Basedoncommit:$gitcommithash&quot;Thenspecifytheargumentsunderthebuildkey.Youcanpassamappingoralist:build:context:.args:buildno:1gitcommithash:cdc3b19build:context:.args:-buildno=1-gitcommithash=cdc3b19Scopeofbuild-argsInyourDockerfile,ifyouspecifyARGbeforetheFROMinstruction,ARGisnotavailableinthebuildinstructionsunderFROM.Ifyouneedanargumenttobeavailableinbothplaces,alsospecifyitundertheFROMinstruction.RefertotheunderstandhowARGSandFROMinteractsectioninthedocumentationforusagedetails.Youcanomitthevaluewhenspecifyingabuildargument,inwhichcaseitsvalueatbuildtimeisthevalueintheenvironmentwhereComposeisrunning.args:-buildno-gitcommithashTipwhenusingbooleanvaluesYAMLbooleanvalues(&quot;true&quot;,&quot;false&quot;,&quot;yes&quot;,&quot;no&quot;,&quot;on&quot;,&quot;off&quot;)mustbeenclosedinquotes,sothattheparserinterpretsthemasstrings.cache_fromAddedinversion3.2fileformatAlistofimagesthattheengineusesforcacheresolution.build:context:.cache_from:-alpine:latest-corp/web_app:3.14labelsAddedinversion3.3fileformatAddmetadatatotheresultingimageusingDockerlabels.Youcanuseeitheranarrayoradictionary.It'srecommendedthatyouusereverse-DNSnotationtopreventyourlabelsfromconflictingwiththoseusedbyothersoftware.build:context:.labels:com.example.description:&quot;Accountingwebapp&quot;com.example.department:&quot;Finance&quot;com.example.label-with-empty-value:&quot;&quot;build:context:.labels:-&quot;com.example.description=Accountingwebapp&quot;-&quot;com.example.department=Finance&quot;-&quot;com.example.label-with-empty-value&quot;networkAddedinversion3.4fileformatSetthenetworkcontainersconnecttofortheRUNinstructionsduringbuild.build:context:.network:hostbuild:context:.network:custom_network_1Usenonetodisablenetworkingduringbuild:build:context:.network:noneshm_sizeAddedinversion3.5fileformatSetthesizeofthe/dev/shmpartitionforthisbuild'scontainers.Specifyasanintegervaluerepresentingthenumberofbytesorasastringexpressingabytevalue.build:context:.shm_size:'2gb'build:context:.shm_size:10000000targetAddedinversion3.4fileformatBuildthespecifiedstageasdefinedinsidetheDockerfile.Seethemulti-stagebuilddocsfordetails.build:context:.target:prodcap_add,cap_dropAddordropcontainercapabilities.Seeman7capabilitiesforafulllist.cap_add:-ALLcap_drop:-NET_ADMIN-SYS_ADMINNotewhenusingdockerstackdeployThecap_addandcap_dropoptionsareignoredwhendeployingastackinswarmmodecgroup_parentSpecifyanoptionalparentcgroupforthecontainer.cgroup_parent:m-executor-abcdNotewhenusingdockerstackdeployThecgroup_parentoptionisignoredwhendeployingastackinswarmmodecommandOverridethedefaultcommand.command:bundleexecthin-p3000Thecommandcanalsobealist,inamannersimilartodockerfile:command:[&quot;bundle&quot;,&quot;exec&quot;,&quot;thin&quot;,&quot;-p&quot;,&quot;3000&quot;]configsGrantaccesstoconfigsonaper-servicebasisusingtheper-serviceconfigsconfiguration.Twodifferentsyntaxvariantsaresupported.Note:Theconfigmustalreadyexistorbedefinedinthetop-levelconfigsconfigurationofthisstackfile,orstackdeploymentfails.Formoreinformationonconfigs,seeconfigs.ShortsyntaxTheshortsyntaxvariantonlyspecifiestheconfigname.Thisgrantsthecontaineraccesstotheconfigandmountsitat/&lt;config_name&gt;withinthecontainer.Thesourcenameanddestinationmountpointarebothsettotheconfigname.Thefollowingexampleusestheshortsyntaxtogranttheredisserviceaccesstothemy_configandmy_other_configconfigs.Thevalueofmy_configissettothecontentsofthefile./my_config.txt,andmy_other_configisdefinedasanexternalresource,whichmeansthatithasalreadybeendefinedinDocker,eitherbyrunningthedockerconfigcreatecommandorbyanotherstackdeployment.Iftheexternalconfigdoesnotexist,thestackdeploymentfailswithaconfignotfounderror.Addedinversion3.3fileformat.configdefinitionsareonlysupportedinversion3.3andhigherofthecomposefileformat.version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:latestdeploy:replicas:1configs:-my_config-my_other_configconfigs:my_config:file:./my_config.txtmy_other_config:external:trueLongsyntaxThelongsyntaxprovidesmoregranularityinhowtheconfigiscreatedwithintheservice'staskcontainers.source:Theidentifieroftheconfigasitisdefinedinthisconfiguration.target:Thepathandnameofthefiletobemountedintheservice'staskcontainers.Defaultsto/&lt;source&gt;ifnotspecified.uidandgid:ThenumericUIDorGIDthatownsthemountedconfigfilewithinintheservice'staskcontainers.Bothdefaultto0onLinuxifnotspecified.NotsupportedonWindows.mode:Thepermissionsforthefilethatismountedwithintheservice'staskcontainers,inoctalnotation.Forinstance,0444representsworld-readable.Thedefaultis0444.Configscannotbewritablebecausetheyaremountedinatemporaryfilesystem,soifyousetthewritablebit,itisignored.Theexecutablebitcanbeset.Ifyouaren'tfamiliarwithUNIXfilepermissionmodes,youmayfindthispermissionscalculator{:target=&quot;blank&quot;rel=&quot;noopener&quot;class=&quot;&quot;}useful.Thefollowingexamplesetsthenameofmy_configtoredis_configwithinthecontainer,setsthemodeto0440(group-readable)andsetstheuserandgroupto103.Theredisservicedoesnothaveaccesstothemy_other_configconfig.version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:latestdeploy:replicas:1configs:-source:my_configtarget:/redis_configuid:'103'gid:'103'mode:0440configs:my_config:file:./my_config.txtmy_other_config:external:trueYoucangrantaserviceaccesstomultipleconfigsandyoucanmixlongandshortsyntax.Definingaconfigdoesnotimplygrantingaserviceaccesstoit.container_nameSpecifyacustomcontainername,ratherthanagenerateddefaultname.container_name:my-web-containerBecauseDockercontainernamesmustbeunique,youcannotscaleaservicebeyond1containerifyouhavespecifiedacustomname.Attemptingtodosoresultsinanerror.NotewhenusingdockerstackdeployThecontainer_nameoptionisignoredwhendeployingastackinswarmmodecredential_specAddedinversion3.3fileformat.Thecredential_specoptionwasaddedinv3.3.UsinggroupManagedServiceAccount(gMSA)configurationswithcomposefilesissupportedinfileformatversion3.8orup.Configurethecredentialspecformanagedserviceaccount.ThisoptionisonlyusedforservicesusingWindowscontainers.Thecredential_specmustbeintheformatfile://&lt;filename&gt;orregistry://&lt;value-name&gt;.Whenusingfile:,thereferencedfilemustbepresentintheCredentialSpecssubdirectoryintheDockerdatadirectory,whichdefaultstoC:\\ProgramData\\Docker\\onWindows.ThefollowingexampleloadsthecredentialspecfromafilenamedC:\\ProgramData\\Docker\\CredentialSpecs\\my-credential-spec.json.credential_spec:file:my-credential-spec.jsonWhenusingregistry:,thecredentialspecisreadfromtheWindowsregistryonthedaemon'shost.Aregistryvaluewiththegivennamemustbelocatedin:HKLM\\SOFTWARE\\Microsoft\\WindowsNT\\CurrentVersion\\Virtualization\\Containers\\CredentialSpecsThefollowingexampleloadthecredentialspecfromavaluenamedmy-credential-specintheregistry:credential_spec:registry:my-credential-specExamplegMSAconfigurationWhenconfiguringagMSAcredentialspecforaservice,youonlyneedtospecifyacredentialspecwithconfig,asshowninthefollowingexample:version:&quot;{{site.compose_file_v3}}&quot;services:myservice:image:myimage:latestcredential_spec:config:my_credential_specconfigs:my_credentials_spec:file:./my-credential-spec.json|depends_onExpressdependencybetweenservices.Servicedependenciescausethefollowingbehaviors:docker-composeupstartsservicesindependencyorder.Inthefollowingexample,dbandredisarestartedbeforeweb.docker-composeupSERVICEautomaticallyincludesSERVICE'sdependencies.Intheexamplebelow,docker-composeupwebalsocreatesandstartsdbandredis.docker-composestopstopsservicesindependencyorder.Inthefollowingexample,webisstoppedbeforedbandredis.Simpleexample:version:&quot;{{site.compose_file_v3}}&quot;services:web:build:.depends_on:-db-redisredis:image:redisdb:image:postgresThereareseveralthingstobeawareofwhenusingdepends_on:depends_ondoesnotwaitfordbandredistobe&quot;ready&quot;beforestartingweb-onlyuntiltheyhavebeenstarted.Ifyouneedtowaitforaservicetobeready,seeControllingstartuporderformoreonthisproblemandstrategiesforsolvingit.Thedepends_onoptionisignoredwhendeployingastackinswarmmodewithaversion3Composefile.deployAddedinversion3fileformat.Specifyconfigurationrelatedtothedeploymentandrunningofservices.Thisonlytakeseffectwhendeployingtoaswarmwithdockerstackdeploy,andisignoredbydocker-composeupanddocker-composerun.version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:alpinedeploy:replicas:6placement:max_replicas_per_node:1update_config:parallelism:2delay:10srestart_policy:condition:on-failureSeveralsub-optionsareavailable:endpoint_modeAddedinversion3.2fileformat.Specifyaservicediscoverymethodforexternalclientsconnectingtoaswarm.endpoint_mode:vip-DockerassignstheserviceavirtualIP(VIP)thatactsasthefrontendforclientstoreachtheserviceonanetwork.Dockerroutesrequestsbetweentheclientandavailableworkernodesfortheservice,withoutclientknowledgeofhowmanynodesareparticipatingintheserviceortheirIPaddressesorports.(Thisisthedefault.)endpoint_mode:dnsrr-DNSround-robin(DNSRR)servicediscoverydoesnotuseasinglevirtualIP.DockersetsupDNSentriesfortheservicesuchthataDNSqueryfortheservicenamereturnsalistofIPaddresses,andtheclientconnectsdirectlytooneofthese.DNSround-robinisusefulincaseswhereyouwanttouseyourownloadbalancer,orforHybridWindowsandLinuxapplications.version:&quot;{{site.compose_file_v3}}&quot;services:wordpress:image:wordpressports:-&quot;8080:80&quot;networks:-overlaydeploy:mode:replicatedreplicas:2endpoint_mode:vipmysql:image:mysqlvolumes:-db-data:/var/lib/mysql/datanetworks:-overlaydeploy:mode:replicatedreplicas:2endpoint_mode:dnsrrvolumes:db-data:networks:overlay:Theoptionsforendpoint_modealsoworkasflagsontheswarmmodeCLIcommanddockerservicecreate.Foraquicklistofallswarmrelateddockercommands,seeSwarmmodeCLIcommands.Tolearnmoreaboutservicediscoveryandnetworkinginswarmmode,seeConfigureservicediscoveryintheswarmmodetopics.labelsSpecifylabelsfortheservice.Theselabelsareonlysetontheservice,andnotonanycontainersfortheservice.version:&quot;{{site.compose_file_v3}}&quot;services:web:image:webdeploy:labels:com.example.description:&quot;Thislabelwillappearonthewebservice&quot;Tosetlabelsoncontainersinstead,usethelabelskeyoutsideofdeploy:version:&quot;{{site.compose_file_v3}}&quot;services:web:image:weblabels:com.example.description:&quot;Thislabelwillappearonallcontainersforthewebservice&quot;modeEitherglobal(exactlyonecontainerperswarmnode)orreplicated(aspecifiednumberofcontainers).Thedefaultisreplicated.(Tolearnmore,seeReplicatedandglobalservicesintheswarmtopics.)version:&quot;{{site.compose_file_v3}}&quot;services:worker:image:dockersamples/examplevotingapp_workerdeploy:mode:globalplacementSpecifyplacementofconstraintsandpreferences.Seethedockerservicecreatedocumentationforafulldescriptionofthesyntaxandavailabletypesofconstraints,preferences,andspecifyingthemaximumreplicaspernodeversion:&quot;{{site.compose_file_v3}}&quot;services:db:image:postgresdeploy:placement:constraints:-&quot;node.role==manager&quot;-&quot;engine.labels.operatingsystem==ubuntu18.04&quot;preferences:-spread:node.labels.zonemax_replicas_per_nodeAddedinversion3.8fileformat.Iftheserviceisreplicated(whichisthedefault),limitthenumberofreplicasthatcanrunonanodeatanytime.Whentherearemoretasksrequestedthanrunningnodes,anerrornosuitablenode(maxreplicaspernodelimitexceed)israised.version:&quot;{{site.compose_file_v3}}&quot;services:worker:image:dockersamples/examplevotingapp_workernetworks:-frontend-backenddeploy:mode:replicatedreplicas:6placement:max_replicas_per_node:1replicasIftheserviceisreplicated(whichisthedefault),specifythenumberofcontainersthatshouldberunningatanygiventime.version:&quot;{{site.compose_file_v3}}&quot;services:worker:image:dockersamples/examplevotingapp_workernetworks:-frontend-backenddeploy:mode:replicatedreplicas:6resourcesConfiguresresourceconstraints.Changedincompose-fileversion3TheresourcessectionreplacestheolderresourceconstraintoptionsinComposefilespriortoversion3(cpu_shares,cpu_quota,cpuset,mem_limit,memswap_limit,mem_swappiness).RefertoUpgradingversion2.xto3.xtolearnaboutdifferencesbetweenversion2and3ofthecompose-fileformat.Eachoftheseisasinglevalue,analogoustoitsdockerservicecreatecounterpart.Inthisgeneralexample,theredisserviceisconstrainedtousenomorethan50Mofmemoryand0.50(50%ofasinglecore)ofavailableprocessingtime(CPU),andhas20Mofmemoryand0.25CPUtimereserved(asalwaysavailabletoit).version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:alpinedeploy:resources:limits:cpus:'0.50'memory:50Mreservations:cpus:'0.25'memory:20MThetopicsbelowdescribeavailableoptionstosetresourceconstraintsonservicesorcontainersinaswarm.Lookingforoptionstosetresourcesonnonswarmmodecontainers?Theoptionsdescribedherearespecifictothedeploykeyandswarmmode.Ifyouwanttosetresourceconstraintsonnonswarmdeployments,useComposefileformatversion2CPU,memory,andotherresourceoptions.Ifyouhavefurtherquestions,refertothediscussionontheGitHubissuedocker/compose/4513restart_policyConfiguresifandhowtorestartcontainerswhentheyexit.Replacesrestart.condition:Oneofnone,on-failureorany(default:any).delay:Howlongtowaitbetweenrestartattempts,specifiedasaduration(default:5s).max_attempts:Howmanytimestoattempttorestartacontainerbeforegivingup(default:nevergiveup).Iftherestartdoesnotsucceedwithintheconfiguredwindow,thisattemptdoesn'tcounttowardtheconfiguredmax_attemptsvalue.Forexample,ifmax_attemptsissetto'2',andtherestartfailsonthefirstattempt,morethantworestartsmaybeattempted.window:Howlongtowaitbeforedecidingifarestarthassucceeded,specifiedasaduration(default:decideimmediately).version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:alpinedeploy:restart_policy:condition:on-failuredelay:5smax_attempts:3window:120srollback_configAddedinversion3.7fileformat.Configureshowtheserviceshouldberollbackedincaseofafailingupdate.parallelism:Thenumberofcontainerstorollbackatatime.Ifsetto0,allcontainersrollbacksimultaneously.delay:Thetimetowaitbetweeneachcontainergroup'srollback(default0s).failure_action:Whattodoifarollbackfails.Oneofcontinueorpause(defaultpause)monitor:Durationaftereachtaskupdatetomonitorforfailure(ns|us|ms|s|m|h)(default5s)Note:Settingto0willusethedefault5s.max_failure_ratio:Failureratetotolerateduringarollback(default0).order:Orderofoperationsduringrollbacks.Oneofstop-first(oldtaskisstoppedbeforestartingnewone),orstart-first(newtaskisstartedfirst,andtherunningtasksbrieflyoverlap)(defaultstop-first).update_configConfigureshowtheserviceshouldbeupdated.Usefulforconfiguringrollingupdates.parallelism:Thenumberofcontainerstoupdateatatime.delay:Thetimetowaitbetweenupdatingagroupofcontainers.failure_action:Whattodoifanupdatefails.Oneofcontinue,rollback,orpause(default:pause).monitor:Durationaftereachtaskupdatetomonitorforfailure(ns|us|ms|s|m|h)(default5s)Note:Settingto0willusethedefault5s.max_failure_ratio:Failureratetotolerateduringanupdate.order:Orderofoperationsduringupdates.Oneofstop-first(oldtaskisstoppedbeforestartingnewone),orstart-first(newtaskisstartedfirst,andtherunningtasksbrieflyoverlap)(defaultstop-first)Note:Onlysupportedforv3.4andhigher.Addedinversion3.4fileformat.Theorderoptionisonlysupportedbyv3.4andhigherofthecomposefileformat.version:&quot;{{site.compose_file_v3}}&quot;services:vote:image:dockersamples/examplevotingapp_vote:beforedepends_on:-redisdeploy:replicas:2update_config:parallelism:2delay:10sorder:stop-firstNotsupportedfordockerstackdeployThefollowingsub-options(supportedfordocker-composeupanddocker-composerun)arenotsupportedfordockerstackdeployorthedeploykey.buildcgroup_parentcontainer_namedevicestmpfsexternal_linkslinksnetwork_moderestartsecurity_optuserns_modeTipSeethesectiononhowtoconfigurevolumesforservices,swarms,anddocker-stack.ymlfiles.Volumesaresupportedbuttoworkwithswarmsandservices,theymustbeconfiguredasnamedvolumesorassociatedwithservicesthatareconstrainedtonodeswithaccesstotherequisitevolumes.devicesListofdevicemappings.Usesthesameformatasthe--devicedockerclientcreateoption.devices:-&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;NotewhenusingdockerstackdeployThedevicesoptionisignoredwhendeployingastackinswarmmodednsCustomDNSservers.Canbeasinglevalueoralist.dns:8.8.8.8dns:-8.8.8.8-9.9.9.9dns_searchCustomDNSsearchdomains.Canbeasinglevalueoralist.dns_search:example.comdns_search:-dc1.example.com-dc2.example.comentrypointOverridethedefaultentrypoint.entrypoint:/code/entrypoint.shTheentrypointcanalsobealist,inamannersimilartodockerfile:entrypoint:[&quot;php&quot;,&quot;-d&quot;,&quot;memory_limit=-1&quot;,&quot;vendor/bin/phpunit&quot;]NoteSettingentrypointbothoverridesanydefaultentrypointsetontheservice'simagewiththeENTRYPOINTDockerfileinstruction,andclearsoutanydefaultcommandontheimage-meaningthatifthere'saCMDinstructionintheDockerfile,itisignored.env_fileAddenvironmentvariablesfromafile.Canbeasinglevalueoralist.IfyouhavespecifiedaComposefilewithdocker-compose-fFILE,pathsinenv_filearerelativetothedirectorythatfileisin.Environmentvariablesdeclaredintheenvironmentsectionoverridethesevalues–thisholdstrueevenifthosevaluesareemptyorundefined.env_file:.envenv_file:-./common.env-./apps/web.env-/opt/runtime_opts.envComposeexpectseachlineinanenvfiletobeinVAR=VALformat.Linesbeginningwith#aretreatedascommentsandareignored.Blanklinesarealsoignored.#SetRails/RackenvironmentRACK_ENV=developmentNoteIfyourservicespecifiesabuildoption,variablesdefinedinenvironmentfilesarenotautomaticallyvisibleduringthebuild.Usetheargssub-optionofbuildtodefinebuild-timeenvironmentvariables.ThevalueofVALisusedasisandnotmodifiedatall.Forexampleifthevalueissurroundedbyquotes(asisoftenthecaseofshellvariables),thequotesareincludedinthevaluepassedtoCompose.Keepinmindthattheorderoffilesinthelistissignificantindeterminingthevalueassignedtoavariablethatshowsupmorethanonce.Thefilesinthelistareprocessedfromthetopdown.Forthesamevariablespecifiedinfilea.envandassignedadifferentvalueinfileb.env,ifb.envislistedbelow(after),thenthevaluefromb.envstands.Forexample,giventhefollowingdeclarationindocker-compose.yml:services:some-service:env_file:-a.env-b.envAndthefollowingfiles:#a.envVAR=1and#b.envVAR=hello$VARishello.environmentAddenvironmentvariables.Youcanuseeitheranarrayoradictionary.Anybooleanvalues(true,false,yes,no)needtobeenclosedinquotestoensuretheyarenotconvertedtoTrueorFalsebytheYMLparser.EnvironmentvariableswithonlyakeyareresolvedtotheirvaluesonthemachineComposeisrunningon,whichcanbehelpfulforsecretorhost-specificvalues.environment:RACK_ENV:developmentSHOW:'true'SESSION_SECRET:environment:-RACK_ENV=development-SHOW=true-SESSION_SECRETNoteIfyourservicespecifiesabuildoption,variablesdefinedinenvironmentarenotautomaticallyvisibleduringthebuild.Usetheargssub-optionofbuildtodefinebuild-timeenvironmentvariables.exposeExposeportswithoutpublishingthemtothehostmachine-they'llonlybeaccessibletolinkedservices.Onlytheinternalportcanbespecified.expose:-&quot;3000&quot;-&quot;8000&quot;external_linksLinktocontainersstartedoutsidethisdocker-compose.ymlorevenoutsideofCompose,especiallyforcontainersthatprovidesharedorcommonservices.external_linksfollowsemanticssimilartothelegacyoptionlinkswhenspecifyingboththecontainernameandthelinkalias(CONTAINER:ALIAS).external_links:-redis_1-project_db_1:mysql-project_db_1:postgresqlNoteTheexternally-createdcontainersmustbeconnectedtoatleastoneofthesamenetworksastheservicethatislinkingtothem.Linksarealegacyoption.Werecommendusingnetworksinstead.NotewhenusingdockerstackdeployTheexternal_linksoptionisignoredwhendeployingastackinswarmmodeextra_hostsAddhostnamemappings.Usethesamevaluesasthedockerclient--add-hostparameter.extra_hosts:-&quot;somehost:162.242.195.82&quot;-&quot;otherhost:50.31.209.229&quot;Anentrywiththeipaddressandhostnameiscreatedin/etc/hostsinsidecontainersforthisservice,e.g:162.242.195.82somehost50.31.209.229otherhosthealthcheckConfigureacheckthat'sruntodeterminewhetherornotcontainersforthisserviceare&quot;healthy&quot;.SeethedocsfortheHEALTHCHECKDockerfileinstructionfordetailsonhowhealthcheckswork.healthcheck:test:[&quot;CMD&quot;,&quot;curl&quot;,&quot;-f&quot;,&quot;http://localhost&quot;]interval:1m30stimeout:10sretries:3start_period:40sinterval,timeoutandstart_periodarespecifiedasdurations.Addedinversion3.4fileformat.Thestart_periodoptionwasaddedinfileformat3.4.testmustbeeitherastringoralist.Ifit'salist,thefirstitemmustbeeitherNONE,CMDorCMD-SHELL.Ifit'sastring,it'sequivalenttospecifyingCMD-SHELLfollowedbythatstring.#Hitthelocalwebapptest:[&quot;CMD&quot;,&quot;curl&quot;,&quot;-f&quot;,&quot;http://localhost&quot;]Asabove,butwrappedin/bin/sh.Bothformsbelowareequivalent.test:[&quot;CMD-SHELL&quot;,&quot;curl-fhttp://localhost||exit1&quot;]test:curl-fhttps://localhost||exit1Todisableanydefaulthealthchecksetbytheimage,youcanusedisable:true.Thisisequivalenttospecifyingtest:[&quot;NONE&quot;].healthcheck:disable:trueimageSpecifytheimagetostartthecontainerfrom.Caneitherbearepository/tagorapartialimageID.image:redisimage:ubuntu:18.04image:tutum/influxdbimage:example-registry.com:4000/postgresqlimage:a4bc65fdIftheimagedoesnotexist,Composeattemptstopullit,unlessyouhavealsospecifiedbuild,inwhichcaseitbuildsitusingthespecifiedoptionsandtagsitwiththespecifiedtag.initAddedinversion3.7fileformat.Runaninitinsidethecontainerthatforwardssignalsandreapsprocesses.Setthisoptiontotruetoenablethisfeaturefortheservice.version:&quot;{{site.compose_file_v3}}&quot;services:web:image:alpine:latestinit:trueThedefaultinitbinarythatisusedisTini,andisinstalledin/usr/libexec/docker-initonthedaemonhost.Youcanconfigurethedaemontouseacustominitbinarythroughtheinit-pathconfigurationoption.isolationSpecifyacontainer’sisolationtechnology.OnLinux,theonlysupportedvalueisdefault.OnWindows,acceptablevaluesaredefault,processandhyperv.RefertotheDockerEnginedocsfordetails.labelsAddmetadatatocontainersusingDockerlabels.Youcanuseeitheranarrayoradictionary.It'srecommendedthatyouusereverse-DNSnotationtopreventyourlabelsfromconflictingwiththoseusedbyothersoftware.labels:com.example.description:&quot;Accountingwebapp&quot;com.example.department:&quot;Finance&quot;com.example.label-with-empty-value:&quot;&quot;labels:-&quot;com.example.description=Accountingwebapp&quot;-&quot;com.example.department=Finance&quot;-&quot;com.example.label-with-empty-value&quot;linksWarningThe--linkflagisalegacyfeatureofDocker.Itmayeventuallyberemoved.Unlessyouabsolutelyneedtocontinueusingit,werecommendthatyouuseuser-definednetworkstofacilitatecommunicationbetweentwocontainersinsteadofusing--link.Onefeaturethatuser-definednetworksdonotsupportthatyoucandowith--linkissharingenvironmentalvariablesbetweencontainers.However,youcanuseothermechanismssuchasvolumestoshareenvironmentvariablesbetweencontainersinamorecontrolledway.{:.warning}Linktocontainersinanotherservice.Eitherspecifyboththeservicenameandalinkalias(&quot;SERVICE:ALIAS&quot;),orjusttheservicename.web:links:-&quot;db&quot;-&quot;db:database&quot;-&quot;redis&quot;Containersforthelinkedservicearereachableatahostnameidenticaltothealias,ortheservicenameifnoaliaswasspecified.Linksarenotrequiredtoenableservicestocommunicate-bydefault,anyservicecanreachanyotherserviceatthatservice’sname.(Seealso,theLinkstopicinNetworkinginCompose.)Linksalsoexpressdependencybetweenservicesinthesamewayasdepends_on,sotheydeterminetheorderofservicestartup.NoteIfyoudefinebothlinksandnetworks,serviceswithlinksbetweenthemmustshareatleastonenetworkincommontocommunicate.NotewhenusingdockerstackdeployThelinksoptionisignoredwhendeployingastackinswarmmodeloggingLoggingconfigurationfortheservice.logging:driver:syslogoptions:syslog-address:&quot;tcp://192.168.0.42:123&quot;Thedrivernamespecifiesaloggingdriverfortheservice'scontainers,aswiththe--log-driveroptionfordockerrun(documentedhere).Thedefaultvalueisjson-file.driver:&quot;json-file&quot;driver:&quot;syslog&quot;driver:&quot;none&quot;NoteOnlythejson-fileandjournalddriversmakethelogsavailabledirectlyfromdocker-composeupanddocker-composelogs.Usinganyotherdriverdoesnotprintanylogs.Specifyloggingoptionsfortheloggingdriverwiththeoptionskey,aswiththe--log-optoptionfordockerrun.Loggingoptionsarekey-valuepairs.Anexampleofsyslogoptions:driver:&quot;syslog&quot;options:syslog-address:&quot;tcp://192.168.0.42:123&quot;Thedefaultdriverjson-file,hasoptionstolimittheamountoflogsstored.Todothis,useakey-valuepairformaximumstoragesizeandmaximumnumberoffiles:options:max-size:&quot;200k&quot;max-file:&quot;10&quot;Theexampleshownabovewouldstorelogfilesuntiltheyreachamax-sizeof200kB,andthenrotatethem.Theamountofindividuallogfilesstoredisspecifiedbythemax-filevalue.Aslogsgrowbeyondthemaxlimits,olderlogfilesareremovedtoallowstorageofnewlogs.Hereisanexampledocker-compose.ymlfilethatlimitsloggingstorage:version:&quot;{{site.compose_file_v3}}&quot;services:some-service:image:some-servicelogging:driver:&quot;json-file&quot;options:max-size:&quot;200k&quot;max-file:&quot;10&quot;LoggingoptionsavailabledependonwhichloggingdriveryouuseTheaboveexampleforcontrollinglogfilesandsizesusesoptionsspecifictothejson-filedriver.Theseparticularoptionsarenotavailableonotherloggingdrivers.Forafulllistofsupportedloggingdriversandtheiroptions,refertotheloggingdriversdocumentation.network_modeNetworkmode.Usethesamevaluesasthedockerclient--networkparameter,plusthespecialformservice:[servicename].network_mode:&quot;bridge&quot;network_mode:&quot;host&quot;network_mode:&quot;none&quot;network_mode:&quot;service:[servicename]&quot;network_mode:&quot;container:[containername/id]&quot;NoteThisoptionisignoredwhendeployingastackinswarmmode.network_mode:&quot;host&quot;cannotbemixedwithlinks.networksNetworkstojoin,referencingentriesunderthetop-levelnetworkskey.services:some-service:networks:-some-network-other-networkaliasesAliases(alternativehostnames)forthisserviceonthenetwork.Othercontainersonthesamenetworkcanuseeithertheservicenameorthisaliastoconnecttooneoftheservice'scontainers.Sincealiasesisnetwork-scoped,thesameservicecanhavedifferentaliasesondifferentnetworks.NoteAnetwork-widealiascanbesharedbymultiplecontainers,andevenbymultipleservices.Ifitis,thenexactlywhichcontainerthenameresolvestoisnotguaranteed.Thegeneralformatisshownhere.services:some-service:networks:some-network:aliases:-alias1-alias3other-network:aliases:-alias2Intheexamplebelow,threeservicesareprovided(web,worker,anddb),alongwithtwonetworks(newandlegacy).Thedbserviceisreachableatthehostnamedbordatabaseonthenewnetwork,andatdbormysqlonthelegacynetwork.version:&quot;{{site.compose_file_v3}}&quot;services:web:image:&quot;nginx:alpine&quot;networks:-newworker:image:&quot;my-worker-image:latest&quot;networks:-legacydb:image:mysqlnetworks:new:aliases:-databaselegacy:aliases:-mysqlnetworks:new:legacy:ipv4_address,ipv6_addressSpecifyastaticIPaddressforcontainersforthisservicewhenjoiningthenetwork.Thecorrespondingnetworkconfigurationinthetop-levelnetworkssectionmusthaveanipamblockwithsubnetconfigurationscoveringeachstaticaddress.IfIPv6addressingisdesired,theenable_ipv6optionmustbeset,andyoumustuseaversion2.xComposefile.IPv6optionsdonotcurrentlyworkinswarmmode.Anexample:version:&quot;{{site.compose_file_v3}}&quot;services:app:image:nginx:alpinenetworks:app_net:ipv4_address:172.16.238.10ipv6_address:2001:3984:3989::10networks:app_net:ipam:driver:defaultconfig:-subnet:&quot;172.16.238.0/24&quot;-subnet:&quot;2001:3984:3989::/64&quot;pidpid:&quot;host&quot;SetsthePIDmodetothehostPIDmode.ThisturnsonsharingbetweencontainerandthehostoperatingsystemthePIDaddressspace.Containerslaunchedwiththisflagcanaccessandmanipulateothercontainersinthebare-metalmachine'snamespaceandviceversa.portsExposeports.NotePortmappingisincompatiblewithnetwork_mode:hostNotedocker-composerunignoresportsunlessyouinclude--service-ports.ShortsyntaxTherearethreeoptions:Specifybothports(HOST:CONTAINER)Specifyjustthecontainerport(anephemeralhostportischosenforthehostport).SpecifythehostIPaddresstobindtoANDbothports(thedefaultis0.0.0.0,meaningallinterfaces):(IPADDR:HOSTPORT:CONTAINERPORT).IfHOSTPORTisempty(forexample127.0.0.1::80),anephemeralportischosentobindtoonthehost.NoteWhenmappingportsintheHOST:CONTAINERformat,youmayexperienceerroneousresultswhenusingacontainerportlowerthan60,becauseYAMLparsesnumbersintheformatxx:yyasabase-60value.Forthisreason,werecommendalwaysexplicitlyspecifyingyourportmappingsasstrings.ports:-&quot;3000&quot;-&quot;3000-3005&quot;-&quot;8000:8000&quot;-&quot;9090-9091:8080-8081&quot;-&quot;49100:22&quot;-&quot;127.0.0.1:8001:8001&quot;-&quot;127.0.0.1:5000-5010:5000-5010&quot;-&quot;127.0.0.1::5000&quot;-&quot;6060:6060/udp&quot;-&quot;12400-12500:1240&quot;LongsyntaxThelongformsyntaxallowstheconfigurationofadditionalfieldsthatcan'tbeexpressedintheshortform.target:theportinsidethecontainerpublished:thepubliclyexposedportprotocol:theportprotocol(tcporudp)mode:hostforpublishingahostportoneachnode,oringressforaswarmmodeporttobeloadbalanced.ports:-target:80published:8080protocol:tcpmode:hostAddedinversion3.2fileformat.Thelongsyntaxisnewinthev3.2fileformat.profilesprofiles:[&quot;frontend&quot;,&quot;debug&quot;]profiles:-frontend-debugprofilesdefinesalistofnamedprofilesfortheservicetobeenabledunder.Whennotset,theserviceisalwaysenabled.Fortheservicesthatmakeupyourcoreapplicationyoushouldomitprofilessotheywillalwaysbestarted.Validprofilenamesfollowtheregexformat[a-zA-Z0-9][a-zA-Z0-9_.-]+.SeealsoUsingprofileswithComposetolearnmoreaboutprofiles.restartnoisthedefaultrestartpolicy,anditdoesnotrestartacontainerunderanycircumstance.Whenalwaysisspecified,thecontaineralwaysrestarts.Theon-failurepolicyrestartsacontaineriftheexitcodeindicatesanon-failureerror.unless-stoppedalwaysrestartsacontainer,exceptwhenthecontainerisstopped(manuallyorotherwise).restart:&quot;no&quot;restart:alwaysrestart:on-failurerestart:unless-stoppedNotewhenusingdockerstackdeployTherestartoptionisignoredwhendeployingastackinswarmmode.secretsGrantaccesstosecretsonaper-servicebasisusingtheper-servicesecretsconfiguration.Twodifferentsyntaxvariantsaresupported.NotewhenusingdockerstackdeployThesecretmustalreadyexistorbedefinedinthetop-levelsecretsconfigurationofthecomposefile,orstackdeploymentfails.Formoreinformationonsecrets,seesecrets.ShortsyntaxTheshortsyntaxvariantonlyspecifiesthesecretname.Thisgrantsthecontaineraccesstothesecretandmountsitat/run/secrets/&lt;secret_name&gt;withinthecontainer.Thesourcenameanddestinationmountpointarebothsettothesecretname.Thefollowingexampleusestheshortsyntaxtogranttheredisserviceaccesstothemy_secretandmy_other_secretsecrets.Thevalueofmy_secretissettothecontentsofthefile./my_secret.txt,andmy_other_secretisdefinedasanexternalresource,whichmeansthatithasalreadybeendefinedinDocker,eitherbyrunningthedockersecretcreatecommandorbyanotherstackdeployment.Iftheexternalsecretdoesnotexist,thestackdeploymentfailswithasecretnotfounderror.version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:latestdeploy:replicas:1secrets:-my_secret-my_other_secretsecrets:my_secret:file:./my_secret.txtmy_other_secret:external:trueLongsyntaxThelongsyntaxprovidesmoregranularityinhowthesecretiscreatedwithintheservice'staskcontainers.source:Theidentifierofthesecretasitisdefinedinthisconfiguration.target:Thenameofthefiletobemountedin/run/secrets/intheservice'staskcontainers.Defaultstosourceifnotspecified.uidandgid:ThenumericUIDorGIDthatownsthefilewithin/run/secrets/intheservice'staskcontainers.Bothdefaultto0ifnotspecified.mode:Thepermissionsforthefiletobemountedin/run/secrets/intheservice'staskcontainers,inoctalnotation.Forinstance,0444representsworld-readable.ThedefaultinDocker1.13.1is0000,butisbe0444innewerversions.Secretscannotbewritablebecausetheyaremountedinatemporaryfilesystem,soifyousetthewritablebit,itisignored.Theexecutablebitcanbeset.Ifyouaren'tfamiliarwithUNIXfilepermissionmodes,youmayfindthispermissionscalculator{:target=&quot;blank&quot;rel=&quot;noopener&quot;class=&quot;&quot;}useful.Thefollowingexamplesetsnameofthemy_secrettoredis_secretwithinthecontainer,setsthemodeto0440(group-readable)andsetstheuserandgroupto103.Theredisservicedoesnothaveaccesstothemy_other_secretsecret.version:&quot;{{site.compose_file_v3}}&quot;services:redis:image:redis:latestdeploy:replicas:1secrets:-source:my_secrettarget:redis_secretuid:'103'gid:'103'mode:0440secrets:my_secret:file:./my_secret.txtmy_other_secret:external:trueYoucangrantaserviceaccesstomultiplesecretsandyoucanmixlongandshortsyntax.Definingasecretdoesnotimplygrantingaserviceaccesstoit.security_optOverridethedefaultlabelingschemeforeachcontainer.security_opt:-label:user:USER-label:role:ROLENotewhenusingdockerstackdeployThesecurity_optoptionisignoredwhendeployingastackinswarmmode.stop_grace_periodSpecifyhowlongtowaitwhenattemptingtostopacontainerifitdoesn'thandleSIGTERM(orwhateverstopsignalhasbeenspecifiedwithstop_signal),beforesendingSIGKILL.Specifiedasaduration.stop_grace_period:1sstop_grace_period:1m30sBydefault,stopwaits10secondsforthecontainertoexitbeforesendingSIGKILL.stop_signalSetsanalternativesignaltostopthecontainer.BydefaultstopusesSIGTERM.Settinganalternativesignalusingstop_signalcausesstoptosendthatsignalinstead.stop_signal:SIGUSR1sysctlsKernelparameterstosetinthecontainer.Youcanuseeitheranarrayoradictionary.sysctls:net.core.somaxconn:1024net.ipv4.tcp_syncookies:0sysctls:-net.core.somaxconn=1024-net.ipv4.tcp_syncookies=0Youcanonlyusesysctlsthatarenamespacedinthekernel.Dockerdoesnotsupportchangingsysctlsinsideacontainerthatalsomodifythehostsystem.Foranoverviewofsupportedsysctls,refertoconfigurenamespacedkernelparameters(sysctls)atruntime.NotewhenusingdockerstackdeployThisoptionrequiresDockerEngine19.03orupwhendeployingastackinswarmmode.tmpfsAddedinversion3.6fileformat.Mountatemporaryfilesysteminsidethecontainer.Canbeasinglevalueoralist.tmpfs:/runtmpfs:-/run-/tmpNotewhenusingdockerstackdeployThisoptionisignoredwhendeployingastackinswarmmodewitha(version3-3.5)Composefile.Mountatemporaryfilesysteminsidethecontainer.Sizeparameterspecifiesthesizeofthetmpfsmountinbytes.Unlimitedbydefault.-type:tmpfstarget:/apptmpfs:size:1000ulimitsOverridethedefaultulimitsforacontainer.Youcaneitherspecifyasinglelimitasanintegerorsoft/hardlimitsasamapping.ulimits:nproc:65535nofile:soft:20000hard:40000userns_modeuserns_mode:&quot;host&quot;Disablestheusernamespaceforthisservice,ifDockerdaemonisconfiguredwithusernamespaces.Seedockerdformoreinformation.NotewhenusingdockerstackdeployTheuserns_modeoptionisignoredwhendeployingastackinswarmmode.volumesMounthostpathsornamedvolumes,specifiedassub-optionstoaservice.Youcanmountahostpathaspartofadefinitionforasingleservice,andthereisnoneedtodefineitinthetoplevelvolumeskey.But,ifyouwanttoreuseavolumeacrossmultipleservices,thendefineanamedvolumeinthetop-levelvolumeskey.Usenamedvolumeswithservices,swarms,andstackfiles.Changedinversion3fileformat.Thetop-levelvolumeskeydefinesanamedvolumeandreferencesitfromeachservice'svolumeslist.Thisreplacesvolumes_frominearlierversionsoftheComposefileformat.Thisexampleshowsanamedvolume(mydata)beingusedbythewebservice,andabindmountdefinedforasingleservice(firstpathunderdbservicevolumes).Thedbservicealsousesanamedvolumecalleddbdata(secondpathunderdbservicevolumes),butdefinesitusingtheoldstringformatformountinganamedvolume.Namedvolumesmustbelistedunderthetop-levelvolumeskey,asshown.version:&quot;{{site.compose_file_v3}}&quot;services:web:image:nginx:alpinevolumes:-type:volumesource:mydatatarget:/datavolume:nocopy:true-type:bindsource:./statictarget:/opt/app/staticdb:image:postgres:latestvolumes:-&quot;/var/run/postgres/postgres.sock:/var/run/postgres/postgres.sock&quot;-&quot;dbdata:/var/lib/postgresql/data&quot;volumes:mydata:dbdata:NoteForgeneralinformationonvolumes,refertotheusevolumesandvolumepluginssectionsinthedocumentation.ShortsyntaxTheshortsyntaxusesthegeneric[SOURCE:]TARGET[:MODE]format,whereSOURCEcanbeeitherahostpathorvolumename.TARGETisthecontainerpathwherethevolumeismounted.Standardmodesareroforread-onlyandrwforread-write(default).Youcanmountarelativepathonthehost,whichexpandsrelativetothedirectoryoftheComposeconfigurationfilebeingused.Relativepathsshouldalwaysbeginwith.or...volumes:#JustspecifyapathandlettheEnginecreateavolume-/var/lib/mysql#Specifyanabsolutepathmapping-/opt/data:/var/lib/mysql#Pathonthehost,relativetotheComposefile-./cache:/tmp/cache#User-relativepath-~/configs:/etc/configs/:ro#Namedvolume-datavolume:/var/lib/mysqlLongsyntaxAddedinversion3.2fileformat.Thelongformsyntaxallowstheconfigurationofadditionalfieldsthatcan'tbeexpressedintheshortform.type:themounttypevolume,bind,tmpfsornpipesource:thesourceofthemount,apathonthehostforabindmount,orthenameofavolumedefinedinthetop-levelvolumeskey.Notapplicableforatmpfsmount.target:thepathinthecontainerwherethevolumeismountedread_only:flagtosetthevolumeasread-onlybind:configureadditionalbindoptionspropagation:thepropagationmodeusedforthebindvolume:configureadditionalvolumeoptionsnocopy:flagtodisablecopyingofdatafromacontainerwhenavolumeiscreatedtmpfs:configureadditionaltmpfsoptionssize:thesizeforthetmpfsmountinbytesversion:&quot;{{site.compose_file_v3}}&quot;services:web:image:nginx:alpineports:-&quot;80:80&quot;volumes:-type:volumesource:mydatatarget:/datavolume:nocopy:true-type:bindsource:./statictarget:/opt/app/staticnetworks:webnet:volumes:mydata:NoteWhencreatingbindmounts,usingthelongsyntaxrequiresthereferencedfoldertobecreatedbeforehand.Usingtheshortsyntaxcreatesthefolderontheflyifitdoesn'texist.Seethebindmountsdocumentationformoreinformation.Volumesforservices,swarms,andstackfilesNotewhenusingdockerstackdeployWhenworkingwithservices,swarms,anddocker-stack.ymlfiles,keepinmindthatthetasks(containers)backingaservicecanbedeployedonanynodeinaswarm,andthismaybeadifferentnodeeachtimetheserviceisupdated.Intheabsenceofhavingnamedvolumeswithspecifiedsources,Dockercreatesananonymousvolumeforeachtaskbackingaservice.Anonymousvolumesdonotpersistaftertheassociatedcontainersareremoved.Ifyouwantyourdatatopersist,useanamedvolumeandavolumedriverthatismulti-hostaware,sothatthedataisaccessiblefromanynode.Or,setconstraintsontheservicesothatitstasksaredeployedonanodethathasthevolumepresent.Asanexample,thedocker-stack.ymlfileforthevotingappsampleinDockerLabsdefinesaservicecalleddbthatrunsapostgresdatabase.Itisconfiguredasanamedvolumetopersistthedataontheswarm,andisconstrainedtorunonlyonmanagernodes.Hereistherelevantsnip-itfromthatfile:version:&quot;{{site.compose_file_v3}}&quot;services:db:image:postgres:9.4volumes:-db-data:/var/lib/postgresql/datanetworks:-backenddeploy:placement:constraints:[node.role==manager]domainname,hostname,ipc,mac_address,privileged,read_only,shm_size,stdin_open,tty,user,working_dirEachoftheseisasinglevalue,analogoustoitsdockerruncounterpart.Notethatmac_addressisalegacyoption.user:postgresqlworking_dir:/codedomainname:foo.comhostname:fooipc:hostmac_address:02:42:ac:11:65:43privileged:trueread_only:trueshm_size:64Mstdin_open:truetty:trueSpecifyingdurationsSomeconfigurationoptions,suchastheintervalandtimeoutsub-optionsforcheck,acceptadurationasastringinaformatthatlookslikethis:2.5s10s1m30s2h32m5h34m56sThesupportedunitsareus,ms,s,mandh.SpecifyingbytevaluesSomeconfigurationoptions,suchastheshm_sizesub-optionforbuild,acceptabytevalueasastringinaformatthatlookslikethis:2b1024kb2048k300m1gbThesupportedunitsareb,k,mandg,andtheiralternativenotationkb,mbandgb.Decimalvaluesarenotsupportedatthistime.VolumeconfigurationreferenceWhileitispossibletodeclarevolumesontheflyaspartoftheservicedeclaration,thissectionallowsyoutocreatenamedvolumesthatcanbereusedacrossmultipleservices(withoutrelyingonvolumes_from),andareeasilyretrievedandinspectedusingthedockercommandlineorAPI.Seethedockervolumesubcommanddocumentationformoreinformation.Seeusevolumesandvolumepluginsforgeneralinformationonvolumes.Here'sanexampleofatwo-servicesetupwhereadatabase'sdatadirectoryissharedwithanotherserviceasavolumesothatitcanbeperiodicallybackedup:version:&quot;{{site.compose_file_v3}}&quot;services:db:image:dbvolumes:-data-volume:/var/lib/dbbackup:image:backup-servicevolumes:-data-volume:/var/lib/backup/datavolumes:data-volume:Anentryunderthetop-levelvolumeskeycanbeempty,inwhichcaseitusesthedefaultdriverconfiguredbytheEngine(inmostcases,thisisthelocaldriver).Optionally,youcanconfigureitwiththefollowingkeys:driverSpecifywhichvolumedrivershouldbeusedforthisvolume.DefaultstowhateverdrivertheDockerEnginehasbeenconfiguredtouse,whichinmostcasesislocal.Ifthedriverisnotavailable,theEnginereturnsanerrorwhendocker-composeuptriestocreatethevolume.driver:foobardriver_optsSpecifyalistofoptionsaskey-valuepairstopasstothedriverforthisvolume.Thoseoptionsaredriver-dependent-consultthedriver'sdocumentationformoreinformation.Optional.volumes:example:driver_opts:type:&quot;nfs&quot;o:&quot;addr=10.40.0.199,nolock,soft,rw&quot;device:&quot;:/docker/example&quot;externalIfsettotrue,specifiesthatthisvolumehasbeencreatedoutsideofCompose.docker-composeupdoesnotattempttocreateit,andraisesanerrorifitdoesn'texist.Forversion3.3andbelowoftheformat,externalcannotbeusedinconjunctionwithothervolumeconfigurationkeys(driver,driver_opts,labels).Thislimitationnolongerexistsforversion3.4andabove.Intheexamplebelow,insteadofattemptingtocreateavolumecalled[projectname]_data,Composelooksforanexistingvolumesimplycalleddataandmountitintothedbservice'scontainers.version:&quot;{{site.compose_file_v3}}&quot;services:db:image:postgresvolumes:-data:/var/lib/postgresql/datavolumes:data:external:trueDeprecatedinversion3.4fileformat.external.namewasdeprecatedinversion3.4fileformatusenameinstead.YoucanalsospecifythenameofthevolumeseparatelyfromthenameusedtorefertoitwithintheComposefile:volumes:data:external:name:actual-name-of-volumeNotewhenusingdockerstackdeployExternalvolumesthatdonotexistarecreatedifyouusedockerstackdeploytolaunchtheappinswarmmode(insteadofdockercomposeup).Inswarmmode,avolumeisautomaticallycreatedwhenitisdefinedbyaservice.Asservicetasksarescheduledonnewnodes,swarmkitcreatesthevolumeonthelocalnode.Tolearnmore,seemoby/moby#29976.labelsAddmetadatatocontainersusingDockerlabels.Youcanuseeitheranarrayoradictionary.It'srecommendedthatyouusereverse-DNSnotationtopreventyourlabelsfromconflictingwiththoseusedbyothersoftware.labels:com.example.description:&quot;Databasevolume&quot;com.example.department:&quot;IT/Ops&quot;com.example.label-with-empty-value:&quot;&quot;labels:-&quot;com.example.description=Databasevolume&quot;-&quot;com.example.department=IT/Ops&quot;-&quot;com.example.label-with-empty-value&quot;nameAddedinversion3.4fileformat.Setacustomnameforthisvolume.Thenamefieldcanbeusedtoreferencevolumesthatcontainspecialcharacters.Thenameisusedasisandwillnotbescopedwiththestackname.version:&quot;{{site.compose_file_v3}}&quot;volumes:data:name:my-app-dataItcanalsobeusedinconjunctionwiththeexternalproperty:version:&quot;{{site.compose_file_v3}}&quot;volumes:data:external:truename:my-app-dataNetworkconfigurationreferenceThetop-levelnetworkskeyletsyouspecifynetworkstobecreated.ForafullexplanationofCompose'suseofDockernetworkingfeaturesandallnetworkdriveroptions,seetheNetworkingguide.ForDockerLabstutorialsonnetworking,startwithDesigningScalable,PortableDockerContainerNetworksdriverSpecifywhichdrivershouldbeusedforthisnetwork.ThedefaultdriverdependsonhowtheDockerEngineyou'reusingisconfigured,butinmostinstancesitisbridgeonasinglehostandoverlayonaSwarm.TheDockerEnginereturnsanerrorifthedriverisnotavailable.driver:overlaybridgeDockerdefaultstousingabridgenetworkonasinglehost.Forexamplesofhowtoworkwithbridgenetworks,seetheDockerLabstutorialonBridgenetworking.overlayTheoverlaydrivercreatesanamednetworkacrossmultiplenodesinaswarm.Foraworkingexampleofhowtobuildanduseanoverlaynetworkwithaserviceinswarmmode,seetheDockerLabstutorialonOverlaynetworkingandservicediscovery.Foranin-depthlookathowitworksunderthehood,seethenetworkingconceptslabontheOverlayDriverNetworkArchitecture.hostornoneUsethehost'snetworkingstack,ornonetworking.Equivalenttodockerrun--net=hostordockerrun--net=none.Onlyusedifyouusedockerstackcommands.Ifyouusethedocker-composecommand,usenetwork_modeinstead.Ifyouwanttouseaparticularnetworkonacommonbuild,use[network]asmentionedinthesecondyamlfileexample.Thesyntaxforusingbuilt-innetworkssuchashostandnoneisalittledifferent.Defineanexternalnetworkwiththenamehostornone(thatDockerhasalreadycreatedautomatically)andanaliasthatComposecanuse(hostnetornonetinthefollowingexamples),thengranttheserviceaccesstothatnetworkusingthealias.version:&quot;{{site.compose_file_v3}}&quot;services:web:networks:hostnet:{}networks:hostnet:external:truename:hostservices:web:...build:...network:hostcontext:....services:web:...networks:nonet:{}networks:nonet:external:truename:nonedriver_optsSpecifyalistofoptionsaskey-valuepairstopasstothedriverforthisnetwork.Thoseoptionsaredriver-dependent-consultthedriver'sdocumentationformoreinformation.Optional.driver_opts:foo:&quot;bar&quot;baz:1attachableAddedinversion3.2fileformat.Onlyusedwhenthedriverissettooverlay.Ifsettotrue,thenstandalonecontainerscanattachtothisnetwork,inadditiontoservices.Ifastandalonecontainerattachestoanoverlaynetwork,itcancommunicatewithservicesandstandalonecontainersthatarealsoattachedtotheoverlaynetworkfromotherDockerdaemons.networks:mynet1:driver:overlayattachable:trueenable_ipv6EnableIPv6networkingonthisnetwork.NotsupportedinComposeFileversion3enable_ipv6requiresyoutouseaversion2Composefile,asthisdirectiveisnotyetsupportedinSwarmmode.{:.warning}ipamSpecifycustomIPAMconfig.Thisisanobjectwithseveralproperties,eachofwhichisoptional:driver:CustomIPAMdriver,insteadofthedefault.config:Alistwithzeroormoreconfigblocks,eachcontaininganyofthefollowingkeys:subnet:SubnetinCIDRformatthatrepresentsanetworksegmentAfullexample:ipam:driver:defaultconfig:-subnet:172.28.0.0/16NoteAdditionalIPAMconfigurations,suchasgateway,areonlyhonoredforversion2atthemoment.internalBydefault,Dockeralsoconnectsabridgenetworktoittoprovideexternalconnectivity.Ifyouwanttocreateanexternallyisolatedoverlaynetwork,youcansetthisoptiontotrue.labelsAddmetadatatocontainersusingDockerlabels.Youcanuseeitheranarrayoradictionary.It'srecommendedthatyouusereverse-DNSnotationtopreventyourlabelsfromconflictingwiththoseusedbyothersoftware.labels:com.example.description:&quot;Financialtransactionnetwork&quot;com.example.department:&quot;Finance&quot;com.example.label-with-empty-value:&quot;&quot;labels:-&quot;com.example.description=Financialtransactionnetwork&quot;-&quot;com.example.department=Finance&quot;-&quot;com.example.label-with-empty-value&quot;externalIfsettotrue,specifiesthatthisnetworkhasbeencreatedoutsideofCompose.docker-composeupdoesnotattempttocreateit,andraisesanerrorifitdoesn'texist.Forversion3.3andbelowoftheformat,externalcannotbeusedinconjunctionwithothernetworkconfigurationkeys(driver,driver_opts,ipam,internal).Thislimitationnolongerexistsforversion3.4andabove.Intheexamplebelow,proxyisthegatewaytotheoutsideworld.Insteadofattemptingtocreateanetworkcalled[projectname]_outside,Composelooksforanexistingnetworksimplycalledoutsideandconnecttheproxyservice'scontainerstoit.version:&quot;{{site.compose_file_v3}}&quot;services:proxy:build:./proxynetworks:-outside-defaultapp:build:./appnetworks:-defaultnetworks:outside:external:trueDeprecatedinversion3.5fileformat.external.namewasdeprecatedinversion3.5fileformatusenameinstead.YoucanalsospecifythenameofthenetworkseparatelyfromthenameusedtorefertoitwithintheComposefile:version:&quot;{{site.compose_file_v3}}&quot;networks:outside:external:name:actual-name-of-networknameAddedinversion3.5fileformat.Setacustomnameforthisnetwork.Thenamefieldcanbeusedtoreferencenetworkswhichcontainspecialcharacters.Thenameisusedasisandwillnotbescopedwiththestackname.version:&quot;{{site.compose_file_v3}}&quot;networks:network1:name:my-app-netItcanalsobeusedinconjunctionwiththeexternalproperty:version:&quot;{{site.compose_file_v3}}&quot;networks:network1:external:truename:my-app-netconfigsconfigurationreferenceThetop-levelconfigsdeclarationdefinesorreferencesconfigsthatcanbegrantedtotheservicesinthisstack.Thesourceoftheconfigiseitherfileorexternal.file:Theconfigiscreatedwiththecontentsofthefileatthespecifiedpath.external:Ifsettotrue,specifiesthatthisconfighasalreadybeencreated.Dockerdoesnotattempttocreateit,andifitdoesnotexist,aconfignotfounderroroccurs.name:ThenameoftheconfigobjectinDocker.Thisfieldcanbeusedtoreferenceconfigsthatcontainspecialcharacters.Thenameisusedasisandwillnotbescopedwiththestackname.Introducedinversion3.5fileformat.driveranddriver_opts:Thenameofacustomsecretdriver,anddriver-specificoptionspassedaskey/valuepairs.Introducedinversion3.8fileformat,andonlysupportedwhenusingdockerstack.template_driver:Thenameofthetemplatingdrivertouse,whichcontrolswhetherandhowtoevaluatethesecretpayloadasatemplate.Ifnodriverisset,notemplatingisused.Theonlydrivercurrentlysupportedisgolang,whichusesagolang.Introducedinversion3.8fileformat,andonlysupportedwhenusingdockerstack.Refertouseatemplatedconfigforaexamplesoftemplatedconfigs.Inthisexample,my_first_configiscreated(as&lt;stack_name&gt;_my_first_config)whenthestackisdeployed,andmy_second_configalreadyexistsinDocker.configs:my_first_config:file:./config_datamy_second_config:external:trueAnothervariantforexternalconfigsiswhenthenameoftheconfiginDockerisdifferentfromthenamethatexistswithintheservice.Thefollowingexamplemodifiesthepreviousonetousetheexternalconfigcalledredis_config.configs:my_first_config:file:./config_datamy_second_config:external:name:redis_configYoustillneedtograntaccesstotheconfigtoeachserviceinthestack.secretsconfigurationreferenceThetop-levelsecretsdeclarationdefinesorreferencessecretsthatcanbegrantedtotheservicesinthisstack.Thesourceofthesecretiseitherfileorexternal.file:Thesecretiscreatedwiththecontentsofthefileatthespecifiedpath.external:Ifsettotrue,specifiesthatthissecrethasalreadybeencreated.Dockerdoesnotattempttocreateit,andifitdoesnotexist,asecretnotfounderroroccurs.name:ThenameofthesecretobjectinDocker.Thisfieldcanbeusedtoreferencesecretsthatcontainspecialcharacters.Thenameisusedasisandwillnotbescopedwiththestackname.Introducedinversion3.5fileformat.template_driver:Thenameofthetemplatingdrivertouse,whichcontrolswhetherandhowtoevaluatethesecretpayloadasatemplate.Ifnodriverisset,notemplatingisused.Theonlydrivercurrentlysupportedisgolang,whichusesagolang.Introducedinversion3.8fileformat,andonlysupportedwhenusingdockerstack.Inthisexample,my_first_secretiscreatedas&lt;stack_name&gt;_my_first_secretwhenthestackisdeployed,andmy_second_secretalreadyexistsinDocker.secrets:my_first_secret:file:./secret_datamy_second_secret:external:trueAnothervariantforexternalsecretsiswhenthenameofthesecretinDockerisdifferentfromthenamethatexistswithintheservice.Thefollowingexamplemodifiesthepreviousonetousetheexternalsecretcalledredis_secret.ComposeFilev3.5andabovesecrets:my_first_secret:file:./secret_datamy_second_secret:external:truename:redis_secretComposeFilev3.4andundermy_second_secret:external:name:redis_secretYoustillneedtograntaccesstothesecretstoeachserviceinthestack.ComposedocumentationUserguideInstallingComposeComposefileversionsandupgradingSampleappswithComposeCommandlinereference","link":"https://mhxxx.github.io/post/docker-compose-yml-文件详解/"},{"title":"gitbook 的使用","content":"安装需要安装nodejs,使用node-v来检测执行命令npminstallgitbook-cli-g进行安装执行命令gitbookinit{dir}下载gitbook并在指定目录下初始化执行命令gitbookserver以服务的形式启动,浏览器访问127.0.0.1:4000执行命令gitbookbuild完成html的建立build失败如果gitbookbuild时报错找到类似下面的路径C:\\Users\\32631\\.gitbook\\versions\\3.2.3\\lib\\output\\website找到目录下的copyPluginAssets.js文件修改112行和67行将confirm改为falseHTML页面无法通过目录跳转build之后无法通过左侧目录进行跳转vim_book/gitbook/theme.js找的这个文件进行修改找到if(m)for(n.handler这句话把m换成false每次build后都需要进行修改配合database-doc-generator从github上下载database-doc-generator使用命令生成一系列md文档通过gitbookbuild或gitbookserve编译","link":"https://mhxxx.github.io/post/gitbook-的使用/"},{"title":"Elasticsearch 单机配置和部署","content":"单机配置系统配置vi/etc/sysctl.confvm.max_map_count=262144vi/etc/security/limits.conf*softnproc65536*hardnproc65536*softnofile65536*hardnofile65536vi/etc/security/limits.d/20-nproc.conf*softnproc65536重启系统elasticsearch.ymlcluster.name:my-applicationnode.name:node-1network.host:0.0.0.0http.port:9200cluster.initial_master_nodes:[&quot;node-1&quot;]node.master:truenode.data:truehttp.cors.enabled:truehttp.cors.allow-origin:&quot;*&quot;cluster.max_shards_per_node:20000jvm.options默认内存太小的话会导致程序报错{&quot;error&quot;:{&quot;root_cause&quot;:[{&quot;type&quot;:&quot;circuit_breaking_exception&quot;,&quot;reason&quot;:&quot;[parent]Datatoolarge,datafor[&lt;http_request&gt;]wouldbe[1039994134/991.8mb],whichislargerthanthelimitof[1020054732/972.7mb],realusage:[1039984088/991.8mb],newbytesreserved:[10046/9.8kb],usages[request=0/0b,fielddata=119730528/114.1mb,in_flight_requests=10046/9.8kb,model_inference=0/0b,accounting=3024996/2.8mb]&quot;,&quot;bytes_wanted&quot;:1039994134,&quot;bytes_limit&quot;:1020054732,&quot;durability&quot;:&quot;PERMANENT&quot;}],&quot;type&quot;:&quot;circuit_breaking_exception&quot;,&quot;reason&quot;:&quot;[parent]Datatoolarge,datafor[&lt;http_request&gt;]wouldbe[1039994134/991.8mb],whichislargerthanthelimitof[1020054732/972.7mb],realusage:[1039984088/991.8mb],newbytesreserved:[10046/9.8kb],usages[request=0/0b,fielddata=119730528/114.1mb,in_flight_requests=10046/9.8kb,model_inference=0/0b,accounting=3024996/2.8mb]&quot;,&quot;bytes_wanted&quot;:1039994134,&quot;bytes_limit&quot;:1020054732,&quot;durability&quot;:&quot;PERMANENT&quot;},&quot;status&quot;:429}-Xms32g-Xmx32glinux上部署目前新版本的elasticsearch自带java运行环境,所以不需要配置JAVA_HOME先从官网下载最新的安装包并解压创建一个非root用户(例如es)并清除密码,并将解压后的目录赋给elastic调整vm.max_map_count的值为262144进入elasticsearch的bin目录运行./elasticsearch直到能成功运行编写开机自启脚本,需要使用su-c&quot;elasticsearch-d&quot;{user}使其后台运行","link":"https://mhxxx.github.io/post/Elasticsearch-单机配置和部署/"},{"title":"PGSQL源码安装教程","content":"1.获取源码包并解压postgresql源码地址wgethttps://ftp.postgresql.org/pub/source/v12.0/postgresql-12.0.tar.gztarzxvfpostgresql-12.0.tar.gz2.安装依赖#ubuntuapt-getinstallzlib1gapt-getinstallzlib1g-devapt-getinstalllibreadline-dev#CentOSyuminstall-yreadline-develyuminstall-yzlib-devel3.编译安装#进入源码目录下执行./configure--help然后根据需求进行./configuremake&amp;&amp;makeinstall4.初始化数据库添加用户adduserpostgrespasswdpostgres创建并赋权data目录cd/usr/local/pgsqlmkdirdatachownpostgres/usr/local/pgsql/data-R配置环境变量vim/etc/profile在最后添加exportPATH=PATH:/usr/local/pgsql/binexportPGHOME=/usr/local/pgsqlexportPGDATA=/usr/local/pgsql/data初始化数据库initdb启动和结束数据库服务pg_ctlstartpg_ctlstop服务化和开机自启","link":"https://mhxxx.github.io/post/PGSQL源码安装教程/"},{"title":"PGSQL在Windows环境下的主从热备","content":"1.配置主库配置pg_hba.conf在最后添加hostreplicationpostgres0.0.0.0/0md5配置postgresql.conf,修改如下配置,(如果配置前面带#,需要删除#)wal_level=replicamax_wal_senders=8wal_keep_segments=256wal_sender_timeout=60s启动主库2.开始备份连接到主库,执行命令selectpg_start_backup('Replitionwork');开启备份关闭备库,清空备库data目录,拷贝主库data目录下的所有文件到备库data目录下,删除postmaster.pid文件在主库执行命令selectpg_stop_backup(),current_timestamp;关闭备份3.配置备库拷贝备库share目录下recovery.conf.sample文件到data目录下,重命名为recovery.conf在recovery.conf中添加如下配置standby_mode=onprimary_conninfo='host=主库ipport=5432user=postgrespassword=主库密码'配置postgresql.conf文件hot_standby=onhot_standby_feedback=on启动备库,在主库执行selectclient_addr,sync_statefrompg_stat_replication;进行验证4.主备切换备库recovery.conf重命名为recovery.done主库按照上面备库配置一遍重启","link":"https://mhxxx.github.io/post/PGSQL在Windows环境下的主从热备/"},{"title":"使用PathMan对PGSQL分表","content":"安装pathman在pathman的github的release页面获取最新的源码包wgethttps://github.com/postgrespro/pg_pathman/archive/1.5.12.tar.gztarzxvf1.5.12.tar.gzcdpg_pathman-1.5.12makeinstallUSE_PGXS=1如果安装过程中makeinstall出现问题,可能是postgresql环境变量有问题修改配置在数据库的postgresql.conf配置文件中对shared_preload_libraries进行配置shared_preload_libraries='pg_pathman'然后重启pgsql创建扩展pathman需要在使用的每个库上执行创建语句CREATEEXTENSIONpg_pathman使用常用的函数根据hash进行分区create_hash_partitions(parent_relidREGCLASS,expressionTEXT,partitions_countINTEGER,partition_dataBOOLEANDEFAULTTRUE,partition_namesTEXT[]DEFAULTNULL,tablespacesTEXT[]DEFAULTNULL)根据范围进行分区create_range_partitions(parent_relidREGCLASS,expressionTEXT,start_valueANYELEMENT,p_intervalANYELEMENT,p_countINTEGERDEFAULTNULLpartition_dataBOOLEANDEFAULTTRUE)create_range_partitions(parent_relidREGCLASS,expressionTEXT,start_valueANYELEMENT,p_intervalINTERVAL,p_countINTEGERDEFAULTNULL,partition_dataBOOLEANDEFAULTTRUE)create_range_partitions(parent_relidREGCLASS,expressionTEXT,boundsANYARRAY,partition_namesTEXT[]DEFAULTNULL,tablespacesTEXT[]DEFAULTNULL,partition_dataBOOLEANDEFAULTTRUE)分区后进行数据迁移partition_table_concurrently(relationREGCLASS,batch_sizeINTEGERDEFAULT1000,sleep_timeFLOAT8DEFAULT1.0)自动创建分区(仅range可以使用)set_auto(relationREGCLASS,valueBOOLEAN)","link":"https://mhxxx.github.io/post/使用PathMan对PGSQL分表/"},{"title":"風姿花伝","content":"その風を得て、心より心に伝わる花なれば、風姿花伝と名づく。","link":"https://mhxxx.github.io/post/風姿花伝/"}]}